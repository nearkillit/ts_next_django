{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/coffee-app/src/views/ItemDetail.js\",\n    _s = $RefreshSig$();\n\n// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore'; // material ui\n\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { GetItemById } from '../components/Items';\nimport { useParams } from 'react-router-dom';\nimport ItemView from './ItemView';\nimport { useHistory } from 'react-router-dom'; // import { useEffect } from 'react';\n\nimport { Switch, Route, Link } from 'react-router-dom';\nimport Cart from './Cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemDetail = () => {\n  _s();\n\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    Item_id\n  } = useParams();\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  let [choiceTopping, setChoiceTopping] = useState([]);\n  let [sizeChoice, setSizeChoice] = useState(\"\");\n  let [quantityChoise, setQuantityChoise] = useState(\"\");\n  let [sizeFinal, setSizeFinal] = useState(\"\");\n  let [puantityFinal, setQuantityFinal] = useState(\"\");\n\n  const setTopping = e => {\n    const getId = e.target.value * 1;\n\n    if (choiceTopping.includes(getId)) {\n      setChoiceTopping(choiceTopping.filter(item => item !== getId));\n    } else {\n      setChoiceTopping([...choiceTopping, getId]);\n    }\n  };\n\n  let totalPrice = () => {\n    if (sizeChoice === \"M\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceM * quantityChoise + GetItemById(Item_id * 1, state.Coffee).priceM * quantityChoise;\n    } else if (sizeChoice === \"L\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceL * quantityChoise + GetItemById(Item_id * 1, state.Coffee).priceL * quantityChoise;\n    }\n  };\n\n  let setQuantity = e => setQuantityChoise(e.target.value);\n\n  let allSelects = {};\n  let sizePrice = \"\";\n\n  const checkValid = () => {\n    setSizeFinal(\"\");\n    setQuantityFinal(\"\");\n\n    if (sizeChoice === \"\") {\n      setSizeFinal(\"サイズを入力してください\");\n    }\n\n    if (quantityChoise === \"\" || quantityChoise === \"個数を選択してください\") {\n      setQuantityFinal(\"個数を選択してください\");\n    } else {\n      if (sizeChoice === \"M\") {\n        sizePrice = \"priceM\";\n      } else if (sizeChoice === \"L\") {\n        sizePrice = \"priceL\";\n      }\n\n      allSelects = {\n        number: quantityChoise,\n        Itemid: GetItemById(Item_id * 1, state.Coffee).id,\n        toppingid: choiceTopping,\n        price: sizePrice\n      }; // カート作成         \n\n      let cartItemList = state.cart.cartItemList;\n      cartItemList.push(allSelects);\n      let cartItem = state.cart;\n      cartItem.cartItemList = cartItemList; // ログインしていた場合はFirebase、storeを更新\n\n      if (state.user && state.user.uid) {\n        firebase.firestore().collection(`users/${state.user.uid}/carts`).doc(state.cart.uid).update(cartItem).then(querySnapshot => {\n          dispatch({\n            type: 'UPDATE_CARTITEMLIST',\n            payload: {\n              cartItemList\n            }\n          });\n        }); // ログインしていない場合はstore飲み更新\n      } else {\n        dispatch({\n          type: 'UPDATE_CARTITEMLIST',\n          payload: {\n            cartItemList\n          }\n        });\n      }\n\n      handleLink('/cart');\n    }\n  };\n\n  const mainview = {\n    display: \"flex\"\n  };\n  const itemdetail = {\n    display: \"block\",\n    width: \"70%\",\n    textAlign: \"center\"\n  };\n  const itemview = {\n    display: \"block\",\n    width: \"30%\",\n    textAlign: \"center\"\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    style: mainview,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: itemview,\n      children: /*#__PURE__*/_jsxDEV(ItemView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 35\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: itemdetail,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u5546\\u54C1\\u8A73\\u7D30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [GetItemById(Item_id * 1, state.Coffee).name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${process.env.PUBLIC_URL}/${GetItemById(Item_id * 1, state.Coffee).image}`,\n        height: \"400px\",\n        alt: \"\\u5546\\u54C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: GetItemById(Item_id * 1, state.Coffee).detail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"size\",\n          id: \"M\",\n          onClick: () => setSizeChoice(\"M\"),\n          value: \"M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"M\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\xA0M\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceM, \"(\\u7A0E\\u629C)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 102\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"size\",\n          id: \"L\",\n          onClick: () => setSizeChoice(\"L\"),\n          value: \"L\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"L\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\xA0L\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceL, \"(\\u7A0E\\u629C)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 102\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: sizeFinal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: setQuantity,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"---\\u500B\\u6570\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044---\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            children: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5\",\n            children: \"5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"6\",\n            children: \"6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"7\",\n            children: \"7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"8\",\n            children: \"8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"9\",\n            children: \"9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"10\",\n            children: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: puantityFinal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u30C8\\u30C3\\u30D4\\u30F3\\u30B0\\u3092\\u9078\\u629E\\u3067\\u304D\\u307E\\u3059\\u3002\\uFF11\\u3064\\u306B\\u3064\\u304DM\\u30B5\\u30A4\\u30BA\\uFF1A200\\u5186\\u30FBL\\u30B5\\u30A4\\u30BA\\uFF1A300\\u5186\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this), state.Topping && state.Topping.map((row, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"tid\" + index,\n            type: \"checkbox\",\n            value: row.id,\n            onChange: setTopping,\n            checked: choiceTopping.includes(row.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"tid\" + index,\n            children: GetItemById(row.id, state.Topping).name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 25\n        }, this)), \"\\u5408\\u8A08\\u91D1\\u984D:\", totalPrice(), \"(\\u7A0E\\u629C)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: checkValid,\n        children: \"\\u30AB\\u30FC\\u30C8\\u306B\\u8FFD\\u52A0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ItemDetail, \"wmqjpOs/8+QQ130oCNhT5NiCqxA=\", false, function () {\n  return [useSelector, useDispatch, useParams, useHistory];\n});\n\n_c = ItemDetail;\nexport default ItemDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetail\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/views/ItemDetail.js"],"names":["firebase","Button","Card","React","useState","useDispatch","useSelector","GetItemById","useParams","ItemView","useHistory","Switch","Route","Link","Cart","ItemDetail","state","dispatch","Item_id","history","handleLink","path","push","choiceTopping","setChoiceTopping","sizeChoice","setSizeChoice","quantityChoise","setQuantityChoise","sizeFinal","setSizeFinal","puantityFinal","setQuantityFinal","setTopping","e","getId","target","value","includes","filter","item","totalPrice","length","Topping","priceM","Coffee","priceL","setQuantity","allSelects","sizePrice","checkValid","number","Itemid","id","toppingid","price","cartItemList","cart","cartItem","user","uid","firestore","collection","doc","update","then","querySnapshot","type","payload","mainview","display","itemdetail","width","textAlign","itemview","name","process","env","PUBLIC_URL","image","detail","map","row","index"],"mappings":";;;AAAA;AACA,OAAOA,QAAP,MAAqB,qBAArB;AACA,OAAO,2BAAP,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AAEA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAAQC,WAAR,EAAoBC,WAApB,QAAsC,aAAtC;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,UAAT,QAA2B,kBAA3B,C,CACA;;AACA,SACIC,MADJ,EAEIC,KAFJ,EAGIC,IAHJ,QAIS,kBAJT;AAKE,OAAOC,IAAP,MAAiB,QAAjB;;AAEF,OAAO,MAAMC,UAAU,GAAG,MAAK;AAAA;;AAE/B,QAAMC,KAAK,GAAGV,WAAW,CAACU,KAAK,IAAIA,KAAV,CAAzB;AACA,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAM;AAACa,IAAAA;AAAD,MAAYV,SAAS,EAA3B;AACA,QAAMW,OAAO,GAAGT,UAAU,EAA1B;;AACA,QAAMU,UAAU,GAAGC,IAAI,IAAIF,OAAO,CAACG,IAAR,CAAaD,IAAb,CAA3B;;AAEA,MAAI,CAACE,aAAD,EAAgBC,gBAAhB,IAAoCpB,QAAQ,CAAC,EAAD,CAAhD;AACA,MAAI,CAACqB,UAAD,EAAYC,aAAZ,IAA6BtB,QAAQ,CAAC,EAAD,CAAzC;AACA,MAAI,CAACuB,cAAD,EAAgBC,iBAAhB,IAAqCxB,QAAQ,CAAC,EAAD,CAAjD;AACA,MAAI,CAACyB,SAAD,EAAWC,YAAX,IAA2B1B,QAAQ,CAAC,EAAD,CAAvC;AACA,MAAI,CAAC2B,aAAD,EAAeC,gBAAf,IAAmC5B,QAAQ,CAAC,EAAD,CAA/C;;AAGA,QAAM6B,UAAU,GAAIC,CAAD,IAAO;AACtB,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,GAAiB,CAA/B;;AAEA,QAAGd,aAAa,CAACe,QAAd,CAAuBH,KAAvB,CAAH,EAAiC;AAC7BX,MAAAA,gBAAgB,CAACD,aAAa,CAACgB,MAAd,CAAqBC,IAAI,IAAIA,IAAI,KAAKL,KAAtC,CAAD,CAAhB;AACH,KAFD,MAEO;AACHX,MAAAA,gBAAgB,CAAC,CAAC,GAAGD,aAAJ,EAAmBY,KAAnB,CAAD,CAAhB;AACH;AACJ,GARD;;AASI,MAAIM,UAAU,GAAG,MAAO;AACpB,QAAGhB,UAAU,KAAK,GAAlB,EAAsB;AAClB,aAAQF,aAAa,CAACmB,MAAd,GAAuBnC,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC2B,OAAjB,CAAX,CAAqCC,MAA5D,GAAqEjB,cAArE,GAAsFpB,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCD,MAApC,GAA6CjB,cAA3I;AACH,KAFD,MAEM,IAAGF,UAAU,KAAK,GAAlB,EAAsB;AACxB,aAAQF,aAAa,CAACmB,MAAd,GAAuBnC,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC2B,OAAjB,CAAX,CAAqCG,MAA5D,GAAqEnB,cAArE,GAAsFpB,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCC,MAApC,GAA6CnB,cAA3I;AACH;AACJ,GAND;;AAOA,MAAIoB,WAAW,GAAIb,CAAD,IAAON,iBAAiB,CAACM,CAAC,CAACE,MAAF,CAASC,KAAV,CAA1C;;AAEA,MAAIW,UAAU,GAAE,EAAhB;AACA,MAAIC,SAAS,GAAG,EAAhB;;AAEA,QAAMC,UAAU,GAAG,MAAO;AACtBpB,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;;AAEA,QAAIP,UAAU,KAAG,EAAjB,EAAqB;AAClBK,MAAAA,YAAY,CAAC,cAAD,CAAZ;AACF;;AACD,QAAIH,cAAc,KAAG,EAAjB,IAAuBA,cAAc,KAAG,aAA5C,EAA2D;AACxDK,MAAAA,gBAAgB,CAAC,aAAD,CAAhB;AACF,KAFD,MAEK;AACD,UAAGP,UAAU,KAAK,GAAlB,EAAsB;AAClBwB,QAAAA,SAAS,GAAE,QAAX;AACH,OAFD,MAEM,IAAGxB,UAAU,KAAK,GAAlB,EAAsB;AACxBwB,QAAAA,SAAS,GAAE,QAAX;AACH;;AAEDD,MAAAA,UAAU,GAAG;AAACG,QAAAA,MAAM,EAACxB,cAAR;AAAwByB,QAAAA,MAAM,EAAC7C,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCQ,EAAnE;AAAuEC,QAAAA,SAAS,EAAC/B,aAAjF;AAAgGgC,QAAAA,KAAK,EAACN;AAAtG,OAAb,CAPC,CAQD;;AACA,UAAIO,YAAY,GAAGxC,KAAK,CAACyC,IAAN,CAAWD,YAA9B;AACAA,MAAAA,YAAY,CAAClC,IAAb,CAAkB0B,UAAlB;AACA,UAAIU,QAAQ,GAAG1C,KAAK,CAACyC,IAArB;AACAC,MAAAA,QAAQ,CAACF,YAAT,GAAwBA,YAAxB,CAZC,CAcD;;AACA,UAAGxC,KAAK,CAAC2C,IAAN,IAAc3C,KAAK,CAAC2C,IAAN,CAAWC,GAA5B,EAAgC;AAC5B5D,QAAAA,QAAQ,CAAC6D,SAAT,GACGC,UADH,CACe,SAAQ9C,KAAK,CAAC2C,IAAN,CAAWC,GAAI,QADtC,EAEGG,GAFH,CAEO/C,KAAK,CAACyC,IAAN,CAAWG,GAFlB,EAGGI,MAHH,CAGUN,QAHV,EAIGO,IAJH,CAISC,aAAa,IAAI;AACtBjD,UAAAA,QAAQ,CAAC;AAAEkD,YAAAA,IAAI,EAAE,qBAAR;AAA+BC,YAAAA,OAAO,EAAE;AAAEZ,cAAAA;AAAF;AAAxC,WAAD,CAAR;AACD,SANH,EAD4B,CAShC;AACC,OAVD,MAUK;AACDvC,QAAAA,QAAQ,CAAC;AAAEkD,UAAAA,IAAI,EAAE,qBAAR;AAA+BC,UAAAA,OAAO,EAAE;AAAEZ,YAAAA;AAAF;AAAxC,SAAD,CAAR;AACH;;AACDpC,MAAAA,UAAU,CAAC,OAAD,CAAV;AACH;AACF,GAvCH;;AAyCA,QAAMiD,QAAQ,GAAG;AACbC,IAAAA,OAAO,EAAC;AADK,GAAjB;AAIA,QAAMC,UAAU,GAAG;AACfD,IAAAA,OAAO,EAAE,OADM;AAEfE,IAAAA,KAAK,EAAE,KAFQ;AAGfC,IAAAA,SAAS,EAAE;AAHI,GAAnB;AAMA,QAAMC,QAAQ,GAAG;AACbJ,IAAAA,OAAO,EAAE,OADI;AAEbE,IAAAA,KAAK,EAAE,KAFM;AAGbC,IAAAA,SAAS,EAAE;AAHE,GAAjB;AAMA,sBACI,QAAC,IAAD;AAAM,IAAA,KAAK,EAAEJ,QAAb;AAAA,4BACI;AAAK,MAAA,KAAK,EAAEK,QAAZ;AAAA,6BAAsB,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAtB;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,MAAA,KAAK,EAAEH,UAAZ;AAAA,8BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAA,mBAAKhE,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoC8B,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAGA;AAAK,QAAA,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,IAAGvE,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCkC,KAAM,EAAjF;AAAqF,QAAA,MAAM,EAAC,OAA5F;AAAoG,QAAA,GAAG,EAAC;AAAxG;AAAA;AAAA;AAAA;AAAA,cAHA,eAIA;AAAA,kBAAIxE,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCmC;AAAxC;AAAA;AAAA;AAAA;AAAA,cAJA,eAKA;AAAA,gCACG;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,IAAI,EAAC,MAAzB;AAAgC,UAAA,EAAE,EAAC,GAAnC;AAAuC,UAAA,OAAO,EAAE,MAAMtD,aAAa,CAAC,GAAD,CAAnE;AAA0E,UAAA,KAAK,EAAC;AAAhF;AAAA;AAAA;AAAA;AAAA,gBADH,eACyF;AAAO,UAAA,OAAO,EAAC,GAAf;AAAA,iCACtF;AAAA,wCAA0BnB,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCD,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AADsF;AAAA;AAAA;AAAA;AAAA,gBADzF,eAGG;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,IAAI,EAAC,MAAzB;AAAgC,UAAA,EAAE,EAAC,GAAnC;AAAuC,UAAA,OAAO,EAAE,MAAMlB,aAAa,CAAC,GAAD,CAAnE;AAA0E,UAAA,KAAK,EAAC;AAAhF;AAAA;AAAA;AAAA;AAAA,gBAHH,eAGyF;AAAO,UAAA,OAAO,EAAC,GAAf;AAAA,iCACtF;AAAA,wCAA0BnB,WAAW,CAACW,OAAO,GAAC,CAAT,EAAWF,KAAK,CAAC6B,MAAjB,CAAX,CAAoCC,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AADsF;AAAA;AAAA;AAAA;AAAA,gBAHzF;AAAA;AAAA;AAAA;AAAA;AAAA,cALA,eAWA;AAAA,kBAAIjB;AAAJ;AAAA;AAAA;AAAA;AAAA,cAXA,eAYA;AAAA,gCACI;AAAQ,UAAA,QAAQ,EAAEkB,WAAlB;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAQI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARJ,eASI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ,eAUI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVJ,eAWI;AAAQ,YAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAcI;AAAA,oBAAIhB;AAAJ;AAAA;AAAA;AAAA;AAAA,gBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAZA,eA4BA;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAESf,KAAK,CAAC2B,OAAN,IAAiB3B,KAAK,CAAC2B,OAAN,CAAcsC,GAAd,CAAkB,CAACC,GAAD,EAAKC,KAAL,kBAChC;AAAA,kCACI;AAAO,YAAA,EAAE,EAAE,QAAQA,KAAnB;AAA0B,YAAA,IAAI,EAAC,UAA/B;AAA0C,YAAA,KAAK,EAAED,GAAG,CAAC7B,EAArD;AAAyD,YAAA,QAAQ,EAAEpB,UAAnE;AAA+E,YAAA,OAAO,EAAEV,aAAa,CAACe,QAAd,CAAuB4C,GAAG,CAAC7B,EAA3B;AAAxF;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAO,YAAA,OAAO,EAAE,QAAQ8B,KAAxB;AAAA,sBAAgC5E,WAAW,CAAC2E,GAAG,CAAC7B,EAAL,EAAQrC,KAAK,CAAC2B,OAAd,CAAX,CAAkCgC;AAAlE;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA,WAAUQ,KAAV;AAAA;AAAA;AAAA;AAAA,gBADc,CAF1B,+BASU1C,UAAU,EATpB;AAAA;AAAA;AAAA;AAAA;AAAA,cA5BA,eAuCI,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,KAAK,EAAC,SAAlC;AAA4C,QAAA,OAAO,EAAES,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAvCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA8CH,CA3IM;;GAAMnC,U;UAECT,W,EACGD,W,EACCG,S,EACFE,U;;;KALHK,U;AA4Ib,eAAeA,UAAf","sourcesContent":["// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\n\n// material ui\nimport Button from '@material-ui/core/Button' \nimport Card from '@material-ui/core/Card';\n\nimport React, { useState } from 'react';\nimport {useDispatch,useSelector} from \"react-redux\"\nimport { GetItemById } from '../components/Items'\nimport { useParams } from 'react-router-dom'\nimport ItemView from './ItemView'\nimport { useHistory } from 'react-router-dom'\n// import { useEffect } from 'react';\nimport {    \n    Switch,\n    Route,\n    Link\n  } from 'react-router-dom'\n  import Cart from './Cart'\n\nexport const ItemDetail = () =>{\n  \nconst state = useSelector(state => state)\nconst dispatch = useDispatch()\nconst {Item_id} = useParams()\nconst history = useHistory()\nconst handleLink = path => history.push(path)\n\nlet [choiceTopping, setChoiceTopping] = useState([])\nlet [sizeChoice,setSizeChoice] = useState(\"\")\nlet [quantityChoise,setQuantityChoise] = useState(\"\")\nlet [sizeFinal,setSizeFinal] = useState(\"\")\nlet [puantityFinal,setQuantityFinal] = useState(\"\")\n\n\nconst setTopping = (e) => {\n    const getId = e.target.value * 1\n    \n    if(choiceTopping.includes(getId)){\n        setChoiceTopping(choiceTopping.filter(item => item !== getId));\n    } else {\n        setChoiceTopping([...choiceTopping, getId]);\n    }\n}\n    let totalPrice = ()  => {\n        if(sizeChoice === \"M\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceM * quantityChoise + GetItemById(Item_id*1,state.Coffee).priceM * quantityChoise           \n        }else if(sizeChoice === \"L\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceL * quantityChoise + GetItemById(Item_id*1,state.Coffee).priceL * quantityChoise \n        }\n    }\n    let setQuantity = (e) => setQuantityChoise(e.target.value) \n\n    let allSelects ={}\n    let sizePrice = \"\"\n    \n    const checkValid = ()  => {\n        setSizeFinal(\"\")\n        setQuantityFinal(\"\")\n        \n        if (sizeChoice===\"\") {       \n           setSizeFinal(\"サイズを入力してください\") \n        } \n        if (quantityChoise===\"\" || quantityChoise===\"個数を選択してください\") {       \n           setQuantityFinal(\"個数を選択してください\")\n        }else{\n            if(sizeChoice === \"M\"){\n                sizePrice= \"priceM\"\n            }else if(sizeChoice === \"L\"){\n                sizePrice= \"priceL\"\n            }\n            \n            allSelects = {number:quantityChoise, Itemid:GetItemById(Item_id*1,state.Coffee).id, toppingid:choiceTopping, price:sizePrice}            \n            // カート作成         \n            let cartItemList = state.cart.cartItemList            \n            cartItemList.push(allSelects)            \n            let cartItem = state.cart\n            cartItem.cartItemList = cartItemList\n            \n            // ログインしていた場合はFirebase、storeを更新\n            if(state.user && state.user.uid){\n                firebase.firestore()\n                  .collection(`users/${state.user.uid}/carts`)\n                  .doc(state.cart.uid)\n                  .update(cartItem)\n                  .then( querySnapshot => {                                              \n                    dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})            \n                  })\n            \n            // ログインしていない場合はstore飲み更新\n            }else{\n                dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})\n            }  \n            handleLink('/cart')              \n        }                \n      }\n    \n    const mainview = {\n        display:\"flex\"\n    }\n\n    const itemdetail = {\n        display: \"block\",\n        width: \"70%\",\n        textAlign: \"center\"\n    }\n\n    const itemview = {\n        display: \"block\",\n        width: \"30%\",\n        textAlign: \"center\"\n    }\n\n    return (\n        <Card style={mainview}>\n            <div style={itemview}><ItemView /></div>\n            <div style={itemdetail}>\n            <h1>商品詳細</h1>\n            <h2>{GetItemById(Item_id*1,state.Coffee).name} </h2>            \n            <img src={`${process.env.PUBLIC_URL}/${GetItemById(Item_id*1,state.Coffee).image}`}  height=\"400px\" alt=\"商品\"/>                    \n            <p>{GetItemById(Item_id*1,state.Coffee).detail}</p>\n            <div>\n               <input type=\"radio\" name=\"size\" id='M' onClick={() => setSizeChoice(\"M\")} value=\"M\" /><label htmlFor='M'>\n               <span>&nbsp;M&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceM}(税抜)</span></label>\n               <input type=\"radio\" name=\"size\" id='L' onClick={() => setSizeChoice(\"L\")} value=\"L\" /><label htmlFor='L'>\n               <span>&nbsp;L&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceL}(税抜)</span></label>\n            </div>\n            <p>{sizeFinal}</p>\n            <div>\n                <select onChange={setQuantity}>\n                    <option >---個数を選択してください---</option>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                    <option value=\"6\">6</option>\n                    <option value=\"7\">7</option>\n                    <option value=\"8\">8</option>\n                    <option value=\"9\">9</option>\n                    <option value=\"10\">10</option>\n                </select>\n                <p>{puantityFinal}</p>            \n            </div>\n            <div>\n                <p>トッピングを選択できます。１つにつきMサイズ：200円・Lサイズ：300円</p>\n                    {state.Topping && state.Topping.map((row,index) => (\n                        <div key={index}>                                                       \n                            <input id={\"tid\" + index} type=\"checkbox\" value={row.id} onChange={setTopping} checked={choiceTopping.includes(row.id)}/>\n                            <label htmlFor={\"tid\" + index}>{GetItemById(row.id,state.Topping).name}</label>                            \n                        </div>\n                        ))\n                    }                                            \n                合計金額:{totalPrice()}(税抜)\n            </div>\n                <Button variant=\"contained\" color=\"primary\" onClick={checkValid}>カートに追加</Button>                \n            </div>\n        </Card>\n    )\n}\nexport default ItemDetail"]},"metadata":{},"sourceType":"module"}