{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/coffee-app/src/views/ItemDetail.js\",\n    _s = $RefreshSig$();\n\n// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\nimport Button from '@material-ui/core/Button';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { GetItemById } from '../components/Items';\nimport { useParams } from 'react-router-dom'; // import { useEffect } from 'react';\n\nimport { // BrowserRouter as Router,\nSwitch, Route, Link } from 'react-router-dom';\nimport Cart from './Cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemDetail = () => {\n  _s();\n\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    Item_id\n  } = useParams();\n  let [choiceTopping, setChoiceTopping] = useState([]);\n  let [sizeChoice, setSizeChoice] = useState(\"\");\n  let [quantityChoise, setQuantityChoise] = useState(\"\");\n  let [sizeFinal, setSizeFinal] = useState(\"\");\n  let [puantityFinal, setQuantityFinal] = useState(\"\");\n\n  const setTopping = e => {\n    const getId = e.target.value * 1;\n\n    if (choiceTopping.includes(getId)) {\n      setChoiceTopping(choiceTopping.filter(item => item !== getId));\n    } else {\n      setChoiceTopping([...choiceTopping, getId]);\n    }\n  };\n\n  let totalPrice = () => {\n    if (sizeChoice === \"M\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceM * quantityChoise + GetItemById(Item_id * 1, state.Coffee).priceM * quantityChoise;\n    } else if (sizeChoice === \"L\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceL * quantityChoise + GetItemById(Item_id * 1, state.Coffee).priceL * quantityChoise;\n    }\n  };\n\n  let setQuantity = e => setQuantityChoise(e.target.value);\n\n  let allSelects = {};\n  let sizePrice = \"\";\n\n  const checkValid = () => {\n    setSizeFinal(\"\");\n    setQuantityFinal(\"\");\n\n    if (sizeChoice === \"\") {\n      setSizeFinal(\"サイズを入力してください\");\n    }\n\n    if (quantityChoise === \"\" || quantityChoise === \"個数を選択してください\") {\n      setQuantityFinal(\"個数を選択してください\");\n    } else {\n      if (sizeChoice === \"M\") {\n        sizePrice = \"priceM\";\n      } else if (sizeChoice === \"L\") {\n        sizePrice = \"priceL\";\n      }\n\n      allSelects = {\n        number: quantityChoise,\n        Itemid: GetItemById(Item_id * 1, state.Coffee).id,\n        toppingid: choiceTopping,\n        price: sizePrice\n      }; // カート作成         \n\n      let cartItemList = state.cart.cartItemList;\n      cartItemList.push(allSelects);\n      let cartItem = state.cart;\n      cartItem.cartItemList = cartItemList; // ログインしていた場合はFirebase、storeを更新\n\n      if (state.user && state.user.uid) {\n        firebase.firestore().collection(`users/${state.user.uid}/carts`).doc(state.cart.uid).update(cartItem).then(querySnapshot => {\n          dispatch({\n            type: 'UPDATE_CARTITEMLIST',\n            payload: {\n              cartItemList\n            }\n          });\n        }); // ログインしていない場合はstore飲み更新\n      } else {\n        dispatch({\n          type: 'UPDATE_CARTITEMLIST',\n          payload: {\n            cartItemList\n          }\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u5546\\u54C1\\u8A73\\u7D30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [GetItemById(Item_id * 1, state.Coffee).name, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: `${process.env.PUBLIC_URL}/${GetItemById(Item_id * 1, state.Coffee).image}`,\n      height: \"400px\",\n      alt: \"\\u5546\\u54C1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: GetItemById(Item_id * 1, state.Coffee).detail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        name: \"size\",\n        id: \"M\",\n        onClick: () => setSizeChoice(\"M\"),\n        value: \"M\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"M\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\xA0M\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceM, \"(\\u7A0E\\u629C)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 102\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        name: \"size\",\n        id: \"L\",\n        onClick: () => setSizeChoice(\"L\"),\n        value: \"L\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"L\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\xA0L\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceL, \"(\\u7A0E\\u629C)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 102\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: sizeFinal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: setQuantity,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"---\\u500B\\u6570\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044---\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2\",\n          children: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"3\",\n          children: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"4\",\n          children: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5\",\n          children: \"5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"6\",\n          children: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"7\",\n          children: \"7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"8\",\n          children: \"8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"9\",\n          children: \"9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"10\",\n          children: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: puantityFinal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u30C8\\u30C3\\u30D4\\u30F3\\u30B0\\u3092\\u9078\\u629E\\u3067\\u304D\\u307E\\u3059\\u3002\\uFF11\\u3064\\u306B\\u3064\\u304DM\\u30B5\\u30A4\\u30BA\\uFF1A200\\u5186\\u30FBL\\u30B5\\u30A4\\u30BA\\uFF1A300\\u5186\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), state.Topping && state.Topping.map((row, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"tid\" + index,\n          type: \"checkbox\",\n          value: row.id,\n          onChange: setTopping,\n          checked: choiceTopping.includes(row.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"tid\" + index,\n          children: GetItemById(row.id, state.Topping).name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this)), \"\\u5408\\u8A08\\u91D1\\u984D:\", totalPrice(), \"(\\u7A0E\\u629C)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: checkValid,\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cart\",\n        children: \"\\u30AB\\u30FC\\u30C8\\u306B\\u8FFD\\u52A0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 82\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/cart\",\n        exact: true,\n        component: Cart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ItemDetail, \"rXM4IB971iQYCCXmFxoee+cG6cA=\", false, function () {\n  return [useSelector, useDispatch, useParams];\n});\n\n_c = ItemDetail;\nexport default ItemDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetail\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/views/ItemDetail.js"],"names":["firebase","Button","React","useState","useDispatch","useSelector","GetItemById","useParams","Switch","Route","Link","Cart","ItemDetail","state","dispatch","Item_id","choiceTopping","setChoiceTopping","sizeChoice","setSizeChoice","quantityChoise","setQuantityChoise","sizeFinal","setSizeFinal","puantityFinal","setQuantityFinal","setTopping","e","getId","target","value","includes","filter","item","totalPrice","length","Topping","priceM","Coffee","priceL","setQuantity","allSelects","sizePrice","checkValid","number","Itemid","id","toppingid","price","cartItemList","cart","push","cartItem","user","uid","firestore","collection","doc","update","then","querySnapshot","type","payload","name","process","env","PUBLIC_URL","image","detail","map","row","index"],"mappings":"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","sourcesContent":["// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\n\nimport Button from '@material-ui/core/Button' \n\nimport React, { useState } from 'react';\nimport {useDispatch,useSelector} from \"react-redux\"\nimport { GetItemById } from '../components/Items'\nimport { useParams} from 'react-router-dom'\n// import { useEffect } from 'react';\nimport {\n    // BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from 'react-router-dom'\n  import Cart from './Cart'\n\nexport const ItemDetail = () =>{\n  \nconst state = useSelector(state => state)\nconst dispatch = useDispatch()\nconst {Item_id} = useParams() \n\nlet [choiceTopping, setChoiceTopping] = useState([])\nlet [sizeChoice,setSizeChoice] = useState(\"\")\nlet [quantityChoise,setQuantityChoise] = useState(\"\")\nlet [sizeFinal,setSizeFinal] = useState(\"\")\nlet [puantityFinal,setQuantityFinal] = useState(\"\")\n\n\nconst setTopping = (e) => {\n    const getId = e.target.value * 1\n    \n    if(choiceTopping.includes(getId)){\n        setChoiceTopping(choiceTopping.filter(item => item !== getId));\n    } else {\n        setChoiceTopping([...choiceTopping, getId]);\n    }\n}\n    let totalPrice = ()  => {\n        if(sizeChoice === \"M\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceM * quantityChoise + GetItemById(Item_id*1,state.Coffee).priceM * quantityChoise           \n        }else if(sizeChoice === \"L\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceL * quantityChoise + GetItemById(Item_id*1,state.Coffee).priceL * quantityChoise \n        }\n    }\n    let setQuantity = (e) => setQuantityChoise(e.target.value) \n\n    let allSelects ={}\n    let sizePrice = \"\"\n    \n    const checkValid = ()  => {\n        setSizeFinal(\"\")\n        setQuantityFinal(\"\")\n        \n        if (sizeChoice===\"\") {       \n           setSizeFinal(\"サイズを入力してください\") \n        } \n        if (quantityChoise===\"\" || quantityChoise===\"個数を選択してください\") {       \n           setQuantityFinal(\"個数を選択してください\")\n        }else{\n            if(sizeChoice === \"M\"){\n                sizePrice= \"priceM\"\n            }else if(sizeChoice === \"L\"){\n                sizePrice= \"priceL\"\n            }\n            \n            allSelects = {number:quantityChoise, Itemid:GetItemById(Item_id*1,state.Coffee).id, toppingid:choiceTopping, price:sizePrice}            \n            // カート作成         \n            let cartItemList = state.cart.cartItemList            \n            cartItemList.push(allSelects)            \n            let cartItem = state.cart\n            cartItem.cartItemList = cartItemList\n            \n            // ログインしていた場合はFirebase、storeを更新\n            if(state.user && state.user.uid){\n                firebase.firestore()\n                  .collection(`users/${state.user.uid}/carts`)\n                  .doc(state.cart.uid)\n                  .update(cartItem)\n                  .then( querySnapshot => {                                              \n                    dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})            \n                  })\n            \n            // ログインしていない場合はstore飲み更新\n            }else{\n                dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})\n            }                \n        }                \n      }\n    return (\n        <React.Fragment>\n            <h1>商品詳細</h1>\n            <h2>{GetItemById(Item_id*1,state.Coffee).name} </h2>            \n            <img src={`${process.env.PUBLIC_URL}/${GetItemById(Item_id*1,state.Coffee).image}`}  height=\"400px\" alt=\"商品\"/>                    \n            <p>{GetItemById(Item_id*1,state.Coffee).detail}</p>\n            <div>\n               <input type=\"radio\" name=\"size\" id='M' onClick={() => setSizeChoice(\"M\")} value=\"M\" /><label for='M'>\n               <span>&nbsp;M&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceM}(税抜)</span></label>\n               <input type=\"radio\" name=\"size\" id='L' onClick={() => setSizeChoice(\"L\")} value=\"L\" /><label for='L'>\n               <span>&nbsp;L&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceL}(税抜)</span></label>\n            </div>\n            <p>{sizeFinal}</p>\n            <div>\n                <select onChange={setQuantity}>\n                    <option >---個数を選択してください---</option>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                    <option value=\"6\">6</option>\n                    <option value=\"7\">7</option>\n                    <option value=\"8\">8</option>\n                    <option value=\"9\">9</option>\n                    <option value=\"10\">10</option>\n                </select>\n                <p>{puantityFinal}</p>            \n            </div>\n            <div>\n                <p>トッピングを選択できます。１つにつきMサイズ：200円・Lサイズ：300円</p>\n                    {state.Topping && state.Topping.map((row,index) => (\n                        <div key={index}>                                                       \n                            <input id={\"tid\" + index} type=\"checkbox\" value={row.id} onChange={setTopping} checked={choiceTopping.includes(row.id)}/>\n                            <label for={\"tid\" + index}>{GetItemById(row.id,state.Topping).name}</label>                            \n                        </div>\n                        ))\n                    }                                            \n                合計金額:{totalPrice()}(税抜)\n            </div>\n                <Button variant=\"contained\" color=\"primary\" onClick={checkValid}><Link to= '/cart'>カートに追加</Link></Button>\n                <Switch><Route path = '/cart' exact component = {Cart}></Route></Switch>\n        </React.Fragment>\n    )\n}\nexport default ItemDetail"]},"metadata":{},"sourceType":"module"}