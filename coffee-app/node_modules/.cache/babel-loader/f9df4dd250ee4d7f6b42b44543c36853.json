{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/coffee-app/src/views/OrderFinish.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport { Grid } from \"@material-ui/core\";\nimport { Card } from \"@material-ui/core\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport { useSelector } from \"react-redux\"; // test\n\nimport { sendMail } from '../components/SendMail';\nimport { MakeReceipt, mRtest } from '../components/MakeRecipt';\nimport labelmake from \"labelmake\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderFinish = () => {\n  _s();\n\n  const [receiptPDF, setReceiptPDF] = useState('');\n  const state = useSelector(state => state);\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  const mrt = async () => {\n    const template = {\n      basePdf: {\n        width: 210,\n        height: 297\n      },\n      schemas: [{\n        field1: {\n          position: {\n            x: 20,\n            y: 20\n          },\n          width: 50,\n          height: 50,\n          fontSize: 30,\n          type: \"text\"\n        },\n        field2: {\n          position: {\n            x: 20,\n            y: 35\n          },\n          width: 50,\n          height: 50,\n          fontSize: 20,\n          type: \"text\"\n        }\n      }]\n    };\n    const inputs = [{\n      field1: \"aa\",\n      field2: \"aaaaaaaaaaaa\"\n    }, {\n      field1: \"bb\",\n      field2: \"bbbbbbbbbbbb\"\n    }];\n    const pdf = await labelmake({\n      template,\n      inputs\n    });\n    const blob = new Blob([pdf.buffer], {\n      type: \"application/pdf\"\n    });\n    console.log(blob);\n    console.log(URL.createObjectURL(blob));\n    setReceiptPDF(URL.createObjectURL(blob));\n  };\n\n  useEffect(() => {\n    // setReceiptPDF(MakeReceipt())\n    mRtest().then(res => console.log(res)).catch(err => console.log(err)); // mrt()\n    // sendMail()\n  }, []);\n  useEffect(() => {\n    if (!state.user.uid) {// handleLink('/') \n    }\n  }, [state.user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 8,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\u6C7A\\u6E08\\u304C\\u5B8C\\u4E86\\u3057\\u307E\\u3057\\u305F\\uFF01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u3053\\u306E\\u5EA6\\u306F\\u3054\\u6CE8\\u6587\\u3042\\u308A\\u304C\\u3068\\u3046\\u3054\\u3056\\u3044\\u307E\\u3059\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u304A\\u652F\\u6255\\u3044\\u5148\\u306F\\u3001\\u304A\\u9001\\u308A\\u3057\\u305F\\u30E1\\u30FC\\u30EB\\u306B\\u8A18\\u8F09\\u3057\\u3066\\u3042\\u308A\\u307E\\u3059\\u306E\\u3067\\u3054\\u78BA\\u8A8D\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this), receiptPDF !== '' && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: receiptPDF,\n              children: \"\\u9818\\u53CE\\u66F8\\u3092\\u8868\\u793A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 39\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            component: Link,\n            to: \"/\",\n            children: \"\\u30C8\\u30C3\\u30D7\\u753B\\u9762\\u3092\\u8868\\u793A\\u3059\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderFinish, \"0ChPsmJ/UJE9vMmhWc19sQjpWHw=\", false, function () {\n  return [useSelector, useHistory];\n});\n\n_c = OrderFinish;\nexport default OrderFinish;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderFinish\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/views/OrderFinish.js"],"names":["Button","Link","Grid","Card","useEffect","useState","useHistory","useSelector","sendMail","MakeReceipt","mRtest","labelmake","OrderFinish","receiptPDF","setReceiptPDF","state","history","handleLink","path","push","mrt","template","basePdf","width","height","schemas","field1","position","x","y","fontSize","type","field2","inputs","pdf","blob","Blob","buffer","console","log","URL","createObjectURL","then","res","catch","err","user","uid"],"mappings":";;;AAAA,SAASA,MAAT,QAAuB,mBAAvB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CACA;;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,WAAT,EAAsBC,MAAtB,QAAoC,0BAApC;AACA,OAAOC,SAAP,MAAsB,WAAtB;;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AACxB,QAAM,CAAEC,UAAF,EAAcC,aAAd,IAAgCT,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAMU,KAAK,GAAGR,WAAW,CAACQ,KAAK,IAAIA,KAAV,CAAzB;AACA,QAAMC,OAAO,GAAGV,UAAU,EAA1B;;AACA,QAAMW,UAAU,GAAGC,IAAI,IAAIF,OAAO,CAACG,IAAR,CAAaD,IAAb,CAA3B;;AAEA,QAAME,GAAG,GAAG,YAAY;AACtB,UAAMC,QAAQ,GAAG;AACfC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,KAAK,EAAE,GAAT;AAAcC,QAAAA,MAAM,EAAE;AAAtB,OADM;AAEfC,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE;AACNC,UAAAA,QAAQ,EAAE;AAAEC,YAAAA,CAAC,EAAE,EAAL;AAASC,YAAAA,CAAC,EAAE;AAAZ,WADJ;AAENN,UAAAA,KAAK,EAAE,EAFD;AAGNC,UAAAA,MAAM,EAAE,EAHF;AAINM,UAAAA,QAAQ,EAAE,EAJJ;AAKNC,UAAAA,IAAI,EAAE;AALA,SADV;AAQEC,QAAAA,MAAM,EAAE;AACNL,UAAAA,QAAQ,EAAE;AAAEC,YAAAA,CAAC,EAAE,EAAL;AAASC,YAAAA,CAAC,EAAE;AAAZ,WADJ;AAENN,UAAAA,KAAK,EAAE,EAFD;AAGNC,UAAAA,MAAM,EAAE,EAHF;AAINM,UAAAA,QAAQ,EAAE,EAJJ;AAKNC,UAAAA,IAAI,EAAE;AALA;AARV,OADO;AAFM,KAAjB;AAqBA,UAAME,MAAM,GAAG,CACb;AAAEP,MAAAA,MAAM,EAAE,IAAV;AAAgBM,MAAAA,MAAM,EAAE;AAAxB,KADa,EAEb;AAAEN,MAAAA,MAAM,EAAE,IAAV;AAAgBM,MAAAA,MAAM,EAAE;AAAxB,KAFa,CAAf;AAIA,UAAME,GAAG,GAAG,MAAMvB,SAAS,CAAC;AAAEU,MAAAA,QAAF;AAAYY,MAAAA;AAAZ,KAAD,CAA3B;AACA,UAAME,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,MAAL,CAAT,EAAuB;AAAEN,MAAAA,IAAI,EAAE;AAAR,KAAvB,CAAb;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACC,eAAJ,CAAoBN,IAApB,CAAZ;AACArB,IAAAA,aAAa,CAAC0B,GAAG,CAACC,eAAJ,CAAoBN,IAApB,CAAD,CAAb;AACD,GA/BD;;AAiCA/B,EAAAA,SAAS,CAAC,MAAI;AACZ;AACAM,IAAAA,MAAM,GAAGgC,IAAT,CAAeC,GAAG,IAChBL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CADF,EAEEC,KAFF,CAESC,GAAG,IACVP,OAAO,CAACC,GAAR,CAAYM,GAAZ,CAHF,EAFY,CAOZ;AACA;AACD,GATQ,EASP,EATO,CAAT;AAWAzC,EAAAA,SAAS,CAAC,MAAI;AACZ,QAAG,CAACW,KAAK,CAAC+B,IAAN,CAAWC,GAAf,EAAmB,CACjB;AACD;AACF,GAJQ,EAIP,CAAChC,KAAK,CAAC+B,IAAP,CAJO,CAAT;AAME,sBACI;AAAA,2BACE,QAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,UAAU,EAAC,QAA3B;AAAA,6BACG,QAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA,+BACE,QAAC,IAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD,eAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHD,EAIEjC,UAAU,KAAK,EAAf,iBAAqB;AAAA,mCAAG;AAAG,cAAA,IAAI,EAAEA,UAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,kBAJvB,eAKK,QAAC,MAAD;AACQ,YAAA,OAAO,EAAC,WADhB;AAEQ,YAAA,KAAK,EAAC,SAFd;AAGQ,YAAA,SAAS,EAAEZ,IAHnB;AAIQ,YAAA,EAAE,EAAC,GAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALL;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADJ;AAsBH,CA9ED;;GAAMW,W;UAEUL,W,EACED,U;;;KAHZM,W;AAgFN,eAAeA,WAAf","sourcesContent":["import { Button } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport { Grid } from \"@material-ui/core\";\nimport { Card } from \"@material-ui/core\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport { useSelector } from \"react-redux\";\n// test\nimport { sendMail } from '../components/SendMail'\nimport { MakeReceipt, mRtest } from '../components/MakeRecipt'\nimport labelmake from \"labelmake\"\n\nconst OrderFinish = () => {\n  const [ receiptPDF, setReceiptPDF ] = useState('')\n  const state = useSelector(state => state);\n  const history = useHistory()\n  const handleLink = path => history.push(path)\n  \n  const mrt = async () => {\n    const template = {\n      basePdf: { width: 210, height: 297 },\n      schemas: [\n        {\n          field1: {\n            position: { x: 20, y: 20 },\n            width: 50,\n            height: 50,\n            fontSize: 30,\n            type: \"text\"\n          },\n          field2: {\n            position: { x: 20, y: 35 },\n            width: 50,\n            height: 50,\n            fontSize: 20,\n            type: \"text\"\n          }\n        }\n      ]\n    };\n    const inputs = [\n      { field1: \"aa\", field2: \"aaaaaaaaaaaa\" },\n      { field1: \"bb\", field2: \"bbbbbbbbbbbb\" }\n    ];\n    const pdf = await labelmake({ template, inputs });\n    const blob = new Blob([pdf.buffer], { type: \"application/pdf\" });\n    console.log(blob)\n    console.log(URL.createObjectURL(blob))\n    setReceiptPDF(URL.createObjectURL(blob))\n  }\n  \n  useEffect(()=>{\n    // setReceiptPDF(MakeReceipt())\n    mRtest().then( res =>\n      console.log(res)\n    ).catch( err =>\n      console.log(err)\n    )   \n    // mrt()\n    // sendMail()\n  },[])\n\n  useEffect(()=>{\n    if(!state.user.uid){\n      // handleLink('/') \n    }\n  },[state.user])\n\n    return (\n        <div>\n          <Grid container alignItems=\"center\" >\n             <Grid item xs={8}>\n               <Card>\n                <h1>決済が完了しました！</h1>\n                <p>この度はご注文ありがとうございます。</p>\n                <p>お支払い先は、お送りしたメールに記載してありますのでご確認ください。</p>\n                {receiptPDF !== '' && <p><a href={receiptPDF}>領収書を表示</a></p>}                \n                    <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            component={Link}\n                            to=\"/\"\n                            >\n                            トップ画面を表示する\n                    </Button>\n                 </Card>\n             </Grid>   \n          </Grid>\n        </div>        \n    )\n}\n\nexport default OrderFinish"]},"metadata":{},"sourceType":"module"}