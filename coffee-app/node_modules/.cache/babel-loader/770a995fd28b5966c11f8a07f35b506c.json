{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/coffee-app/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './App.css';\nimport { newCart } from './store/index'; // firebase\n\nimport firebase from \"firebase/compat/app\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport \"firebase/compat/auth\";\nimport 'firebase/compat/firestore'; // react\n\nimport { Switch, Route, useHistory // useParams,  \n} from 'react-router-dom';\nimport Cart from './views/Cart';\nimport ItemDetail from './views/ItemDetail';\nimport ItemView from './views/ItemView';\nimport OrderConfirm from './views/OrderConfirm';\nimport OrderFinish from './views/OrderFinish';\nimport OrderHistory from './views/OrderHistory';\nimport Administrator from './views/Administrator';\nimport './store/index'; // material ui\n\nimport Button from '@material-ui/core/Button';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport React, { useState, useEffect } from \"react\";\nimport { AppBar, Toolbar } from \"@material-ui/core\"; // material ui icon\n\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport HistoryIcon from '@material-ui/icons/History';\nimport CheckIcon from '@material-ui/icons/Check';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount'; //material ui wether\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box'; // axios\n\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction HistoryApp(props) {\n  _s();\n\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  let newDOM = '';\n  if (props.tag === 'img') newDOM = /*#__PURE__*/_jsxDEV(\"img\", {\n    src: props.context,\n    alt: \"\\u30ED\\u30B4\",\n    onClick: () => handleLink(props.link),\n    children: \" \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 38\n  }, this);\n  if (props.tag === 'button') newDOM = /*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => handleLink(props.link),\n    children: [props.icon, props.name]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 41\n  }, this);\n  if (props.tag === 'button_img') newDOM = /*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => handleLink(props.link),\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.context,\n      alt: \"\\u30ED\\u30B4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 92\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 45\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: newDOM\n  }, void 0, false);\n}\n\n_s(HistoryApp, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = HistoryApp;\n\nfunction App() {\n  _s2();\n\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  let [wetherSet, setWetherSet] = useState(\"\");\n\n  const login = () => {\n    const google_auth_provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithRedirect(google_auth_provider);\n  };\n\n  const logout = () => {\n    firebase.auth().signOut().then(() => {\n      dispatch({\n        type: 'UPDATE_USER',\n        payload: {\n          user: {}\n        }\n      });\n      handleLink('/');\n    });\n  };\n\n  const check = () => {\n    console.log(state);\n  }; // 必ず fetchItems内で行う\n\n\n  const fetchTimeSaleByCoffee = () => {\n    const Coffee = state.Coffee.map(c => {\n      const getTimeSale = state.TimeSale.filter(t => c.id === t.Itemid);\n      console.log(state.TimeSale);\n      return c;\n    }); // dispatch({ type: 'FETCH_ITEM', payload: { Items:{ Coffee } }}) \n  };\n\n  const fetchItems = () => {\n    firebase.firestore().collection(`Items`).get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        dispatch({\n          type: 'FETCH_ITEM',\n          payload: {\n            Items: doc.data()\n          }\n        });\n      });\n      fetchTimeSaleByCoffee();\n    });\n  };\n\n  const fetchCarts = async () => {\n    const setCart = Object.assign({}, newCart);\n    let cartUid = ''; // 途中ログインの場合\n\n    if (localStorage.getItem('middle_login')) {\n      const newCartItemList = JSON.parse(localStorage.getItem('cart')).cartItemList;\n      setCart.cartItemList = newCartItemList;\n    }\n\n    await firebase.firestore().collection(`users/${state.user.uid}/carts`).get().then(querySnapshot => {\n      if (querySnapshot.empty) {\n        createCarts(setCart);\n      } else {\n        querySnapshot.forEach(doc => {\n          let cartMergeUid = doc.data();\n          cartMergeUid.uid = doc.id;\n          cartUid = doc.id;\n          if (doc.data().status === 0) dispatch({\n            type: 'FETCH_CART',\n            payload: {\n              cart: cartMergeUid\n            }\n          });\n          if (doc.data().status !== 0) dispatch({\n            type: 'FETCH_ORDERHISTORY',\n            payload: {\n              orderhistory: doc.data(),\n              uid: doc.id\n            }\n          });\n        });\n      }\n    }); //　途中ログイン処理\n\n    if (localStorage.getItem('middle_login')) {\n      localStorage.removeItem('middle_login');\n      updateCart(setCart, cartUid);\n      handleLink('/orderconfirm');\n    }\n  };\n\n  const start = () => {\n    const auth = getAuth();\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        dispatch({\n          type: 'UPDATE_USER',\n          payload: {\n            user\n          }\n        });\n      }\n    });\n  };\n\n  const updateCart = (setCart, cuid) => {\n    const newCarts = Object.assign({}, setCart);\n    newCarts.uid = cuid;\n    firebase.firestore().collection(`users/${state.user.uid}/carts`).doc(cuid).update(setCart).then(querySnapshot => {\n      dispatch({\n        type: 'UPDATE_CART',\n        payload: {\n          cart: newCarts\n        }\n      });\n    });\n  };\n\n  const createCarts = createCart => {\n    firebase.firestore().collection(`users/${state.user.uid}/carts`).add(createCart).then(d => {\n      const newCarts = Object.assign({}, createCart);\n      newCarts.uid = d.id;\n      dispatch({\n        type: 'CREATE_CART',\n        payload: {\n          cart: newCarts\n        }\n      });\n    });\n  };\n\n  const getWether = () => {\n    axios.get('https://weather.tsukumijima.net/api/forecast', {\n      params: {\n        city: \"130010\"\n      }\n    }).then(res => {\n      console.log(res);\n      const wether = {\n        name: res.data.location.city,\n        date: res.data.forecasts[0].date,\n        detail: res.data.forecasts[0].detail.weather,\n        hai: res.data.forecasts[0].temperature.max.celsius,\n        row: res.data.forecasts[0].temperature.min.celsius,\n        img: res.data.forecasts[0].image.url\n      };\n      setWetherSet(wether);\n    });\n  };\n\n  useEffect(() => {\n    if (state.user && state.user.uid) {\n      fetchCarts();\n      console.log(\"user uid = \" + state.user.uid);\n    }\n  }, [state.user]);\n  useEffect(() => {\n    start();\n    fetchItems();\n    getWether();\n  }, []);\n  const userNameStyle = {\n    margin: '1%'\n  };\n  const imgStyle = {\n    display: 'inline',\n    width: '3%',\n    height: '3%',\n    margin: '5px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-header1\",\n        children: /*#__PURE__*/_jsxDEV(HistoryApp, {\n          tag: \"button_img\",\n          link: \"/\",\n          context: `${process.env.PUBLIC_URL}/header_logo.png`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"sm\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"div\",\n          style: {\n            backgroundColor: 'black',\n            height: '200px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            textAlign: \"right\",\n            m: 1,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [wetherSet.name, \"\\u65E5\\u4ED8\\uFF1A\", wetherSet.date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 120\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u6700\\u9AD8\\u6C17\\u6E29\\uFF1A\", wetherSet.hai, \"\\u2103\\xA0\\u6700\\u4F4E\\u6C17\\u6E29\\uFF1A\", wetherSet.row, \"\\u2103\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 91\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            textAlign: \"left\",\n            m: 1,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: wetherSet.img,\n              width: \"100px\",\n              height: \"150\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"App-header2\",\n        children: [state.user && state.user.displayName ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: logout,\n            children: [/*#__PURE__*/_jsxDEV(LockIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 36\n            }, this), \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: state.user.photoURL,\n            style: imgStyle,\n            alt: \"\\u30E6\\u30FC\\u30B6\\u30FC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: userNameStyle,\n            children: state.user.displayName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Button, {\n          onClick: login,\n          children: [/*#__PURE__*/_jsxDEV(LockOpenIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 33\n          }, this), \"\\u30ED\\u30B0\\u30A4\\u30F3\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: check,\n          children: [/*#__PURE__*/_jsxDEV(CheckIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 33\n          }, this), \"\\u30C1\\u30A7\\u30C3\\u30AF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(HistoryApp, {\n          tag: \"button\",\n          link: \"/cart\",\n          icon: /*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 53\n          }, this),\n          name: \"\\u30AB\\u30FC\\u30C8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(HistoryApp, {\n          tag: \"button\",\n          link: \"/orderhistory\",\n          icon: /*#__PURE__*/_jsxDEV(HistoryIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 61\n          }, this),\n          name: \"\\u6CE8\\u6587\\u5C65\\u6B74\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 9\n        }, this), state.user.uid === \"oD7bRul05kcE0Ez2oQfH01PKv073\" && /*#__PURE__*/_jsxDEV(HistoryApp, {\n          tag: \"button\",\n          link: \"/administrator\",\n          icon: /*#__PURE__*/_jsxDEV(SupervisorAccountIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 116\n          }, this),\n          name: \"\\u203B\\u7BA1\\u7406\\u8005\\u753B\\u9762\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 63\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          exact: true,\n          component: ItemView\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/cart\",\n          exact: true,\n          component: Cart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/itemdetail/:Item_id\",\n          exact: true,\n          component: ItemDetail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/orderconfirm\",\n          exact: true,\n          component: OrderConfirm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/orderfinish\",\n          exact: true,\n          component: OrderFinish\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/orderhistory\",\n          exact: true,\n          component: OrderHistory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/administrator\",\n          exact: true,\n          component: Administrator\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"FotA+QHeZXLD2N6ESq4Wksjn1xE=\", false, function () {\n  return [useDispatch, useSelector, useHistory];\n});\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"HistoryApp\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/App.js"],"names":["newCart","firebase","getAuth","onAuthStateChanged","Switch","Route","useHistory","Cart","ItemDetail","ItemView","OrderConfirm","OrderFinish","OrderHistory","Administrator","Button","useDispatch","useSelector","React","useState","useEffect","AppBar","Toolbar","LockOpenIcon","LockIcon","ShoppingCartIcon","HistoryIcon","CheckIcon","SupervisorAccountIcon","CssBaseline","Typography","Container","Box","axios","HistoryApp","props","history","handleLink","path","push","newDOM","tag","context","link","icon","name","App","dispatch","state","wetherSet","setWetherSet","login","google_auth_provider","auth","GoogleAuthProvider","signInWithRedirect","logout","signOut","then","type","payload","user","check","console","log","fetchTimeSaleByCoffee","Coffee","map","c","getTimeSale","TimeSale","filter","t","id","Itemid","fetchItems","firestore","collection","get","querySnapshot","forEach","doc","Items","data","fetchCarts","setCart","Object","assign","cartUid","localStorage","getItem","newCartItemList","JSON","parse","cartItemList","uid","empty","createCarts","cartMergeUid","status","cart","orderhistory","removeItem","updateCart","start","cuid","newCarts","update","createCart","add","d","getWether","params","city","res","wether","location","date","forecasts","detail","weather","hai","temperature","max","celsius","row","min","img","image","url","userNameStyle","margin","imgStyle","display","width","height","process","env","PUBLIC_URL","backgroundColor","displayName","photoURL"],"mappings":"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","sourcesContent":["import './App.css';\nimport { newCart } from './store/index';\n// firebase\nimport firebase from \"firebase/compat/app\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport \"firebase/compat/auth\";\nimport 'firebase/compat/firestore';\n// react\nimport { \n  Switch,\n  Route,  \n  useHistory\n  // useParams,  \n} from 'react-router-dom'\nimport Cart from './views/Cart'\nimport ItemDetail from './views/ItemDetail'\nimport ItemView from './views/ItemView'\nimport OrderConfirm from './views/OrderConfirm'\nimport OrderFinish from './views/OrderFinish'\nimport OrderHistory from './views/OrderHistory'\nimport Administrator from './views/Administrator'\nimport './store/index'\n\n// material ui\nimport Button from '@material-ui/core/Button';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport React, { useState,useEffect } from \"react\";\nimport { AppBar, Toolbar } from \"@material-ui/core\";\n// material ui icon\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport HistoryIcon from '@material-ui/icons/History';\nimport CheckIcon from '@material-ui/icons/Check';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\n\n//material ui wether\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\n\n\n// axios\nimport axios from 'axios'\n\nfunction HistoryApp(props){\n  const history = useHistory();\n  const handleLink = path => history.push(path)\n  let newDOM = ''\n  \n  if(props.tag === 'img') newDOM = ( <img src={props.context} alt=\"ロゴ\" onClick={() => handleLink(props.link)} > </img> )\n  if(props.tag === 'button') newDOM = ( <Button onClick={() => handleLink(props.link)}>{props.icon}{props.name}</Button> )\n  if(props.tag === 'button_img') newDOM = ( <Button onClick={() => handleLink(props.link)}><img src={props.context} alt=\"ロゴ\" ></img></Button> )\n\n  return (\n    <>\n    {newDOM}\n    </>\n  )\n}\n\nfunction App() {\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const history = useHistory();\n  const handleLink = path => history.push(path)     \n\n  let [wetherSet,setWetherSet] = useState(\"\")\n\n  const login = () => {        \n    const google_auth_provider = new firebase.auth.GoogleAuthProvider();        \n    firebase.auth().signInWithRedirect(google_auth_provider)                                   \n  } \n\n  const logout = () => {                \n    firebase.auth().signOut().then( () => {        \n      dispatch({ type: 'UPDATE_USER', payload: { user: {}}})\n      handleLink('/')\n    })\n  }\n\n  const check = () => {                    \n    console.log(state);       \n  }\n  // 必ず fetchItems内で行う\n  const fetchTimeSaleByCoffee = () => {    \n    const Coffee = state.Coffee.map( c => {\n      const getTimeSale = state.TimeSale.filter( t => c.id === t.Itemid )\n      console.log(state.TimeSale)\n      return c      \n    })    \n    // dispatch({ type: 'FETCH_ITEM', payload: { Items:{ Coffee } }}) \n  }  \n     \n  const fetchItems = () => {    \n    firebase.firestore()\n            .collection(`Items`)\n            .get()\n            .then( querySnapshot => {\n              querySnapshot.forEach( doc => {                                \n                dispatch({ type: 'FETCH_ITEM', payload: { Items: doc.data() }})                                  \n              })\n              fetchTimeSaleByCoffee()                                     \n            })    \n  }\n  \n  const fetchCarts = async () => {         \n    const setCart = Object.assign({},newCart)\n    let cartUid = ''\n\n    // 途中ログインの場合\n    if(localStorage.getItem('middle_login')){      \n      const newCartItemList = JSON.parse(localStorage.getItem('cart')).cartItemList      \n      setCart.cartItemList = newCartItemList            \n    }  \n    \n    await firebase.firestore()\n            .collection(`users/${state.user.uid}/carts`)\n            .get()\n            .then( querySnapshot => {                            \n              if(querySnapshot.empty){\n                  createCarts(setCart);\n              }else{\n                querySnapshot.forEach( doc => {\n                  let cartMergeUid = doc.data()\n                  cartMergeUid.uid = doc.id\n                  cartUid = doc.id\n                  if(doc.data().status === 0) dispatch({ type: 'FETCH_CART', payload: { cart: cartMergeUid }}) \n                  if(doc.data().status !== 0) dispatch({ type: 'FETCH_ORDERHISTORY', payload: { orderhistory: doc.data(), uid: doc.id }})\n                })                        \n              }              \n            })\n        \n      //　途中ログイン処理\n      if(localStorage.getItem('middle_login')){\n        localStorage.removeItem('middle_login');\n        updateCart(setCart, cartUid)\n        handleLink('/orderconfirm')\n      }                     \n    }      \n\n  const start = () => {       \n    const auth = getAuth(); \n    onAuthStateChanged(auth, ( user => {      \n      if(user){                         \n        dispatch({ type: 'UPDATE_USER', payload: { user }})\n      }                         \n    }))\n  }\n\n  const updateCart = (setCart, cuid) => {    \n    const newCarts = Object.assign({},setCart)\n    newCarts.uid = cuid\n    firebase.firestore()\n            .collection(`users/${state.user.uid}/carts`)\n            .doc(cuid)\n            .update(setCart)\n            .then( querySnapshot => {                                                            \n              dispatch({ type: 'UPDATE_CART', payload: { cart: newCarts }})              \n            })   \n  }\n\n  const createCarts = (createCart) => {    \n    firebase.firestore()\n            .collection(`users/${state.user.uid}/carts`)                     \n            .add(createCart)          \n            .then( d => {\n              const newCarts = Object.assign({},createCart)\n              newCarts.uid = d.id\n              dispatch({ type:'CREATE_CART', payload:{ cart: newCarts }})                 \n            }) \n  } \n\n\n\n  const getWether = () =>{\n    axios.get('https://weather.tsukumijima.net/api/forecast',{\n      params:{\n        city:\"130010\"\n      }\n    }).then(res =>{\n      console.log(res)\n      const wether = {\n          name:res.data.location.city,\n          date:res.data.forecasts[0].date,\n          detail:res.data.forecasts[0].detail.weather,\n          hai:res.data.forecasts[0].temperature.max.celsius,\n          row:res.data.forecasts[0].temperature.min.celsius,\n          img:res.data.forecasts[0].image.url\n        }\n        setWetherSet(wether)\n      })\n    }    \n\n  useEffect(()=>{\n    if(state.user && state.user.uid){                  \n      fetchCarts();\n      console.log(\"user uid = \" + state.user.uid);\n    }  \n  },[state.user])  \n\n  useEffect(() => {        \n    start()\n    fetchItems()\n    getWether()  \n  },[])  \n\n\n  const userNameStyle = {\n    margin: '1%',    \n  }\n  const imgStyle = {\n    display: 'inline',\n    width: '3%',\n    height: '3%',\n    margin: '5px'\n  }  \n  \n\n\n\n  return (\n    <div className=\"App\">\n      <AppBar>\n      <div className='App-header1'><HistoryApp tag='button_img' link='/' context={`${process.env.PUBLIC_URL}/header_logo.png`}/></div>\n        <CssBaseline />\n      <Container maxWidth=\"sm\">\n        <Typography component=\"div\" style={{ backgroundColor: 'black', height: '200px' }}><Box textAlign=\"right\" m={1}><p>{wetherSet.name}日付：{wetherSet.date}</p>\n        <p>最高気温：{wetherSet.hai}℃&nbsp;最低気温：{wetherSet.row}℃</p></Box>\n        <Box textAlign=\"left\" m={1}>\n        <img src={wetherSet.img} width=\"100px\" height=\"150\"></img></Box></Typography>\n      </Container>\n        <span className='App-header2' >\n        { state.user && state.user.displayName ? \n        <>\n          <Button onClick={logout}><LockIcon />ログアウト</Button>\n          <img src={state.user.photoURL} style={imgStyle} alt=\"ユーザー\"/>\n          <span style={userNameStyle}>{state.user.displayName}</span>\n        </>          \n        :\n        <Button onClick={login}><LockOpenIcon />ログイン</Button>\n        }          \n        <Button onClick={check}><CheckIcon />チェック</Button>        \n        <HistoryApp tag='button' link='/cart' icon={<ShoppingCartIcon />} name='カート'/>\n        <HistoryApp tag='button' link='/orderhistory' icon={<HistoryIcon />} name='注文履歴'/>  \n        {state.user.uid === \"oD7bRul05kcE0Ez2oQfH01PKv073\" && <HistoryApp tag='button' link='/administrator' icon={<SupervisorAccountIcon />} name='※管理者画面'/>}\n        </span> \n      </AppBar>               \n            <div>                \n                <Switch>\n                    <Route path='/' exact component={ItemView} />\n                    <Route path='/cart' exact component={Cart} />\n                    <Route path='/itemdetail/:Item_id' exact component={ItemDetail} />\n                    <Route path='/orderconfirm' exact component={OrderConfirm} />\n                    <Route path='/orderfinish' exact component={OrderFinish} />\n                    <Route path='/orderhistory' exact component={OrderHistory} />  \n                    <Route path='/administrator' exact component={Administrator} />                                              \n                    {/* <Route>\n                        <p>Not found</p>\n                    </Route> */}\n                </Switch>\n            </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}