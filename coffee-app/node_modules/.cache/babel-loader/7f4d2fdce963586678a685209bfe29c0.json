{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar core_1 = require(\"@material-ui/core\"); // import { Link } from \"react-router-dom\";\n\n\nvar core_2 = require(\"@material-ui/core\");\n\nvar core_3 = require(\"@material-ui/core\");\n\nvar react_2 = require(\"react\");\n\nvar react_router_dom_1 = require(\"react-router-dom\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar app_1 = __importDefault(require(\"firebase/compat/app\"));\n\nrequire(\"firebase/compat/firestore\");\n\nvar Administrator = function () {\n  var state = (0, react_redux_1.useSelector)(function (state) {\n    return state;\n  });\n  var dispatch = (0, react_redux_1.useDispatch)();\n  var history = (0, react_router_dom_1.useHistory)();\n\n  var handleLink = function (path) {\n    return history.push(path);\n  };\n\n  var _a = (0, react_2.useState)([]),\n      items = _a[0],\n      setItems = _a[1];\n\n  var _b = (0, react_2.useState)([]),\n      coupons = _b[0],\n      setCoupons = _b[1];\n\n  var _c = (0, react_2.useState)([]),\n      timesales = _c[0],\n      setTimesales = _c[1];\n\n  var _d = (0, react_2.useState)(''),\n      Itemid = _d[0],\n      setItemid = _d[1];\n\n  var _e = (0, react_2.useState)(''),\n      deadline = _e[0],\n      setDeadline = _e[1];\n\n  var _f = (0, react_2.useState)(''),\n      couponCode = _f[0],\n      setCouponCode = _f[1];\n\n  var _g = (0, react_2.useState)(''),\n      errorDeadline = _g[0],\n      setErrorDeadline = _g[1];\n\n  var changeItemid = function (e) {\n    setItemid(e.target.value);\n  };\n\n  var changeCouponCode = function (e) {\n    setCouponCode(e.target.value);\n  };\n\n  var changeDeadline = function (e) {\n    var setYear = Number(e.target.value.substr(0, 4));\n    var nowYear = new Date().getFullYear();\n\n    if (setYear < nowYear) {\n      setErrorDeadline('年　が今より前です');\n      return;\n    }\n\n    var setMonth = Number(e.target.value.substr(5, 2));\n    var nowMonth = new Date().getMonth() + 1;\n\n    if (setMonth < nowMonth) {\n      setErrorDeadline('月　が今より前です');\n      return;\n    }\n\n    var setDate = Number(e.target.value.substr(8, 2));\n    var nowDate = new Date().getDate();\n\n    if (setDate < nowDate) {\n      setErrorDeadline('日　が今より前です');\n      return;\n    }\n\n    setErrorDeadline('');\n    setDeadline(e.target.value);\n  };\n\n  var setTimeSale = function () {\n    //　未入力チェック\n    var errorSentence = '';\n\n    if (Itemid === '') {\n      errorSentence += '商品、';\n    }\n\n    if (couponCode === '') {\n      errorSentence += '割引金額、';\n    }\n\n    if (deadline === '') {\n      errorSentence += '期限、';\n    }\n\n    if (errorSentence !== '') {\n      errorSentence += 'を入力してください';\n      alert(errorSentence);\n      return;\n    } // 重複チェック\n\n\n    var douplicateCheck = state.TimeSale.filter(function (t) {\n      return t.Itemid === Itemid;\n    }).length !== 0;\n\n    if (douplicateCheck) {\n      alert(\"Id:\" + Itemid + \" の商品は既にタイムセールス中です\");\n      return;\n    }\n\n    var TimeSale = timesales;\n    TimeSale.push({\n      deadline: deadline,\n      Itemid: Itemid,\n      couponCode: couponCode\n    });\n    app_1.default.firestore().collection(\"Items\").doc('TimeSale').set({\n      TimeSale: TimeSale\n    }).then(function (querySnapshot) {\n      console.log(querySnapshot);\n      dispatch({\n        type: 'UPDATE_TIMESALE',\n        payload: {\n          TimeSale: TimeSale\n        }\n      });\n      alert('タイムセールが更新されました');\n    });\n  };\n\n  (0, react_2.useEffect)(function () {\n    setItems(state.Coffee);\n  }, [state.Coffee]);\n  (0, react_2.useEffect)(function () {\n    setCoupons(state.Coupon);\n  }, [state.Coupon]);\n  (0, react_2.useEffect)(function () {\n    setTimesales(state.TimeSale);\n  }, [state.TimeSale]);\n  (0, react_2.useEffect)(function () {\n    if (state.user.uid !== \"oD7bRul05kcE0Ez2oQfH01PKv073\" && state.user.uid !== \"zjoltJkfYMMTpJv9zbK7xXTvLdH3\") {\n      handleLink('/');\n    }\n  }, [state.user]);\n  var errorDeadLineStyle = {\n    position: \"absolute\",\n    color: \"red\",\n    fontSize: \"12px\"\n  };\n  return react_1.default.createElement(\"div\", null, react_1.default.createElement(core_2.Grid, {\n    container: true,\n    alignItems: \"center\"\n  }, react_1.default.createElement(core_2.Grid, {\n    item: true,\n    xs: 8\n  }, react_1.default.createElement(core_3.Card, null, react_1.default.createElement(\"h1\", null, \"\\u7BA1\\u7406\\u8005\\u753B\\u9762\"), react_1.default.createElement(\"p\", null, \"\\u30BF\\u30A4\\u30E0\\u30BB\\u30FC\\u30EB\\u5546\\u54C1\"), react_1.default.createElement(\"select\", {\n    name: \"items\",\n    id: \"item-select\",\n    value: Itemid,\n    onChange: changeItemid\n  }, react_1.default.createElement(\"option\", {\n    value: ''\n  }, \"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), items.map(function (c) {\n    return react_1.default.createElement(\"option\", {\n      key: c.id,\n      value: c.id\n    }, c.name, \"M:\", c.priceM, \"\\u5186\\u3001L:\", c.priceL, \"\\u5186\");\n  })), react_1.default.createElement(\"p\", null, \"\\u5272\\u5F15\\u91D1\\u984D\"), react_1.default.createElement(\"select\", {\n    name: \"coupon\",\n    id: \"coupn-select\",\n    value: couponCode,\n    onChange: changeCouponCode\n  }, react_1.default.createElement(\"option\", {\n    value: ''\n  }, \"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), coupons.filter(function (c) {\n    return c.code.indexOf(\"_TIMESALE\") > 0;\n  }).map(function (c) {\n    return react_1.default.createElement(\"option\", {\n      key: c.code,\n      value: c.code\n    }, \"\\u5272\\u5F15\\u91D1\\u984D:\", c.price, \"\\u5186\");\n  })), react_1.default.createElement(\"p\", null, \"\\u671F\\u9650\"), react_1.default.createElement(\"input\", {\n    type: \"date\",\n    value: deadline,\n    onChange: changeDeadline\n  }), react_1.default.createElement(\"span\", {\n    style: errorDeadLineStyle\n  }, errorDeadline), react_1.default.createElement(\"p\", null, react_1.default.createElement(core_1.Button, {\n    onClick: setTimeSale\n  }, \"\\u6C7A\\u5B9A\"))))));\n};\n\n_c2 = Administrator;\nexports.default = Administrator;\n\nvar _c2;\n\n$RefreshReg$(_c2, \"Administrator\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/gitsample/team-front/coffee-app/src/views/Administrator.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","core_1","core_2","core_3","react_2","react_router_dom_1","react_redux_1","app_1","Administrator","state","useSelector","dispatch","useDispatch","history","useHistory","handleLink","path","push","_a","useState","items","setItems","_b","coupons","setCoupons","_c","timesales","setTimesales","_d","Itemid","setItemid","_e","deadline","setDeadline","_f","couponCode","setCouponCode","_g","errorDeadline","setErrorDeadline","changeItemid","e","target","changeCouponCode","changeDeadline","setYear","Number","substr","nowYear","Date","getFullYear","setMonth","nowMonth","getMonth","setDate","nowDate","getDate","setTimeSale","errorSentence","alert","douplicateCheck","TimeSale","filter","t","length","default","firestore","collection","doc","set","then","querySnapshot","console","log","type","payload","useEffect","Coffee","Coupon","user","uid","errorDeadLineStyle","position","color","fontSize","createElement","Grid","container","alignItems","item","xs","Card","name","id","onChange","map","c","key","priceM","priceL","code","indexOf","price","style","Button","onClick"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar core_1 = require(\"@material-ui/core\");\n// import { Link } from \"react-router-dom\";\nvar core_2 = require(\"@material-ui/core\");\nvar core_3 = require(\"@material-ui/core\");\nvar react_2 = require(\"react\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar react_redux_1 = require(\"react-redux\");\nvar app_1 = __importDefault(require(\"firebase/compat/app\"));\nrequire(\"firebase/compat/firestore\");\nvar Administrator = function () {\n    var state = (0, react_redux_1.useSelector)(function (state) { return state; });\n    var dispatch = (0, react_redux_1.useDispatch)();\n    var history = (0, react_router_dom_1.useHistory)();\n    var handleLink = function (path) { return history.push(path); };\n    var _a = (0, react_2.useState)([]), items = _a[0], setItems = _a[1];\n    var _b = (0, react_2.useState)([]), coupons = _b[0], setCoupons = _b[1];\n    var _c = (0, react_2.useState)([]), timesales = _c[0], setTimesales = _c[1];\n    var _d = (0, react_2.useState)(''), Itemid = _d[0], setItemid = _d[1];\n    var _e = (0, react_2.useState)(''), deadline = _e[0], setDeadline = _e[1];\n    var _f = (0, react_2.useState)(''), couponCode = _f[0], setCouponCode = _f[1];\n    var _g = (0, react_2.useState)(''), errorDeadline = _g[0], setErrorDeadline = _g[1];\n    var changeItemid = function (e) {\n        setItemid(e.target.value);\n    };\n    var changeCouponCode = function (e) {\n        setCouponCode(e.target.value);\n    };\n    var changeDeadline = function (e) {\n        var setYear = Number(e.target.value.substr(0, 4));\n        var nowYear = new Date().getFullYear();\n        if (setYear < nowYear) {\n            setErrorDeadline('年　が今より前です');\n            return;\n        }\n        var setMonth = Number(e.target.value.substr(5, 2));\n        var nowMonth = new Date().getMonth() + 1;\n        if (setMonth < nowMonth) {\n            setErrorDeadline('月　が今より前です');\n            return;\n        }\n        var setDate = Number(e.target.value.substr(8, 2));\n        var nowDate = new Date().getDate();\n        if (setDate < nowDate) {\n            setErrorDeadline('日　が今より前です');\n            return;\n        }\n        setErrorDeadline('');\n        setDeadline(e.target.value);\n    };\n    var setTimeSale = function () {\n        //　未入力チェック\n        var errorSentence = '';\n        if (Itemid === '') {\n            errorSentence += '商品、';\n        }\n        if (couponCode === '') {\n            errorSentence += '割引金額、';\n        }\n        if (deadline === '') {\n            errorSentence += '期限、';\n        }\n        if (errorSentence !== '') {\n            errorSentence += 'を入力してください';\n            alert(errorSentence);\n            return;\n        }\n        // 重複チェック\n        var douplicateCheck = state.TimeSale.filter(function (t) { return t.Itemid === Itemid; }).length !== 0;\n        if (douplicateCheck) {\n            alert(\"Id:\" + Itemid + \" の商品は既にタイムセールス中です\");\n            return;\n        }\n        var TimeSale = timesales;\n        TimeSale.push({ deadline: deadline, Itemid: Itemid, couponCode: couponCode });\n        app_1.default.firestore()\n            .collection(\"Items\")\n            .doc('TimeSale')\n            .set({ TimeSale: TimeSale })\n            .then(function (querySnapshot) {\n            console.log(querySnapshot);\n            dispatch({ type: 'UPDATE_TIMESALE', payload: { TimeSale: TimeSale } });\n            alert('タイムセールが更新されました');\n        });\n    };\n    (0, react_2.useEffect)(function () {\n        setItems(state.Coffee);\n    }, [state.Coffee]);\n    (0, react_2.useEffect)(function () {\n        setCoupons(state.Coupon);\n    }, [state.Coupon]);\n    (0, react_2.useEffect)(function () {\n        setTimesales(state.TimeSale);\n    }, [state.TimeSale]);\n    (0, react_2.useEffect)(function () {\n        if (state.user.uid !== \"oD7bRul05kcE0Ez2oQfH01PKv073\" && state.user.uid !== \"zjoltJkfYMMTpJv9zbK7xXTvLdH3\") {\n            handleLink('/');\n        }\n    }, [state.user]);\n    var errorDeadLineStyle = {\n        position: \"absolute\",\n        color: \"red\",\n        fontSize: \"12px\"\n    };\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(core_2.Grid, { container: true, alignItems: \"center\" },\n            react_1.default.createElement(core_2.Grid, { item: true, xs: 8 },\n                react_1.default.createElement(core_3.Card, null,\n                    react_1.default.createElement(\"h1\", null, \"\\u7BA1\\u7406\\u8005\\u753B\\u9762\"),\n                    react_1.default.createElement(\"p\", null, \"\\u30BF\\u30A4\\u30E0\\u30BB\\u30FC\\u30EB\\u5546\\u54C1\"),\n                    react_1.default.createElement(\"select\", { name: \"items\", id: \"item-select\", value: Itemid, onChange: changeItemid },\n                        react_1.default.createElement(\"option\", { value: '' }, \"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"),\n                        items.map(function (c) {\n                            return (react_1.default.createElement(\"option\", { key: c.id, value: c.id },\n                                c.name,\n                                \"M:\",\n                                c.priceM,\n                                \"\\u5186\\u3001L:\",\n                                c.priceL,\n                                \"\\u5186\"));\n                        })),\n                    react_1.default.createElement(\"p\", null, \"\\u5272\\u5F15\\u91D1\\u984D\"),\n                    react_1.default.createElement(\"select\", { name: \"coupon\", id: \"coupn-select\", value: couponCode, onChange: changeCouponCode },\n                        react_1.default.createElement(\"option\", { value: '' }, \"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"),\n                        coupons.filter(function (c) { return c.code.indexOf(\"_TIMESALE\") > 0; }).map(function (c) {\n                            return (react_1.default.createElement(\"option\", { key: c.code, value: c.code },\n                                \"\\u5272\\u5F15\\u91D1\\u984D:\",\n                                c.price,\n                                \"\\u5186\"));\n                        })),\n                    react_1.default.createElement(\"p\", null, \"\\u671F\\u9650\"),\n                    react_1.default.createElement(\"input\", { type: \"date\", value: deadline, onChange: changeDeadline }),\n                    react_1.default.createElement(\"span\", { style: errorDeadLineStyle }, errorDeadline),\n                    react_1.default.createElement(\"p\", null,\n                        react_1.default.createElement(core_1.Button, { onClick: setTimeSale }, \"\\u6C7A\\u5B9A\")))))));\n};\nexports.default = Administrator;\n"]},"metadata":{},"sourceType":"module"}