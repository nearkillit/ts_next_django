{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/gitsample/team-front/coffee-app/src/views/ItemDetail.tsx\",\n    _s = $RefreshSig$();\n\n// ts\nimport * as React from 'react';\nimport 'react-redux';\n// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore'; // material ui\n\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe';\nimport { useState } from 'react';\nimport { DefaultRootState, useDispatch, useSelector } from \"react-redux\";\nimport { GetItemById } from '../components/Items';\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ItemDetail = () => {\n  _s();\n\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    Item_id\n  } = useParams();\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  let [choiceTopping, setChoiceTopping] = useState([]);\n  let [sizeChoice, setSizeChoice] = useState(\"\");\n  let [quantityChoise, setQuantityChoise] = useState(\"\");\n  let [sizeFinal, setSizeFinal] = useState(\"\");\n  let [puantityFinal, setQuantityFinal] = useState(\"\");\n\n  const setTopping = e => {\n    const getId = Number(e.target.value);\n\n    if (choiceTopping.includes(getId)) {\n      setChoiceTopping(choiceTopping.filter(item => item !== getId));\n    } else {\n      setChoiceTopping([...choiceTopping, getId]);\n    }\n  };\n\n  let totalPrice = () => {\n    if (sizeChoice === \"M\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceM * Number(quantityChoise) + GetItemById(Item_id * 1, state.Coffee).priceM * Number(quantityChoise);\n    } else if (sizeChoice === \"L\") {\n      return choiceTopping.length * GetItemById(Item_id * 1, state.Topping).priceL * Number(quantityChoise) + GetItemById(Item_id * 1, state.Coffee).priceL * Number(quantityChoise);\n    }\n  };\n\n  let setQuantity = e => setQuantityChoise(e.target.value);\n\n  let allSelects = {};\n  let sizePrice = \"\";\n\n  const checkValid = () => {\n    setSizeFinal(\"\");\n    setQuantityFinal(\"\");\n    let errorSentence = \"\";\n\n    if (sizeChoice === \"\") {\n      setSizeFinal(\"サイズを選択してください\");\n      errorSentence += \"サイズ \";\n    }\n\n    if (quantityChoise === \"\" || quantityChoise === \"-------------------------------\") {\n      setQuantityFinal(\"個数を選択してください\");\n      errorSentence += \"個数 \";\n    }\n\n    if (errorSentence !== \"\") {\n      alert(errorSentence + \"を入力してください\");\n    } else {\n      if (sizeChoice === \"M\") {\n        sizePrice = \"priceM\";\n      } else if (sizeChoice === \"L\") {\n        sizePrice = \"priceL\";\n      }\n\n      allSelects = {\n        number: quantityChoise,\n        Itemid: GetItemById(Item_id * 1, state.Coffee).id,\n        toppingid: choiceTopping,\n        price: sizePrice\n      }; // カート作成         \n\n      let cartItemList = state.cart.cartItemList;\n      cartItemList.push(allSelects);\n      let cartItem = state.cart;\n      cartItem.cartItemList = cartItemList; // ログインしていた場合はFirebase、storeを更新\n\n      if (state.user && state.user.uid) {\n        firebase.firestore().collection(`users/${state.user.uid}/carts`).doc(state.cart.uid).update(cartItem).then(querySnapshot => {\n          dispatch({\n            type: 'UPDATE_CARTITEMLIST',\n            payload: {\n              cartItemList\n            }\n          });\n        }); // ログインしていない場合はstore飲み更新\n      } else {\n        dispatch({\n          type: 'UPDATE_CARTITEMLIST',\n          payload: {\n            cartItemList\n          }\n        });\n      }\n\n      handleLink('/cart');\n    }\n  };\n\n  const mainview = {\n    display: \"flex\"\n  };\n  const itemdetail = {\n    display: \"block\",\n    width: \"100%\" // textAlign: \"center\"\n\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    style: mainview,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: itemdetail,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [GetItemById(Item_id * 1, state.Coffee).name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: GetItemById(Item_id * 1, state.Coffee).detail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${process.env.PUBLIC_URL}/${GetItemById(Item_id * 1, state.Coffee).image}`,\n        height: \"400px\",\n        alt: \"\\u5546\\u54C1\",\n        style: {\n          borderRadius: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          backgroundColor: \"rgb(70, 77, 180)\"\n        },\n        children: [\"\\u5408\\u8A08\\u91D1\\u984D\\uFF1A\", totalPrice(), \"\\u5186(\\u7A0E\\u629C)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"error\",\n        children: [\" \", sizeFinal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u30B5\\u30A4\\u30BA\\u306E\\u9078\\u629E\\uFF1A\\u3000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"size\",\n          id: \"M\",\n          onClick: () => setSizeChoice(\"M\"),\n          value: \"M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"M\",\n          className: \"point\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(LocalCafeIcon, {\n              fontSize: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 22\n            }, this), \"\\xA0M\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceM, \"\\u5186(\\u7A0E\\u629C)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 102\n        }, this), \"\\xA0\\xA0/\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"size\",\n          id: \"L\",\n          onClick: () => setSizeChoice(\"L\"),\n          value: \"L\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"L\",\n          className: \"point\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(LocalCafeIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 22\n            }, this), \"\\xA0L\\xA0\\xA0\", GetItemById(Item_id * 1, state.Coffee).priceL, \"\\u5186(\\u7A0E\\u629C)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 102\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"error\",\n          children: [\" \", puantityFinal]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u500B\\u6570\\u306E\\u9078\\u629E\\uFF1A\\u3000\\u3000\\u3000\\u3000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: setQuantity,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"-------------------------------\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            children: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5\",\n            children: \"5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"6\",\n            children: \"6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"7\",\n            children: \"7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"8\",\n            children: \"8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"9\",\n            children: \"9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"10\",\n            children: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u30C8\\u30C3\\u30D4\\u30F3\\u30B0\\u306E\\u9078\\u629E\\uFF1A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            textAlign: 'right',\n            fontSize: '5px'\n          },\n          children: \"\\uFF11\\u3064\\u306B\\u3064\\u304DM\\u30B5\\u30A4\\u30BA\\uFF1A200\\u5186\\u30FBL\\u30B5\\u30A4\\u30BA\\uFF1A300\\u5186\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }, this), state.Topping && state.Topping.map((row, index) => /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"toppingNarabi\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"tid\" + index,\n              type: \"checkbox\",\n              value: row.id,\n              onChange: setTopping,\n              checked: choiceTopping.includes(row.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"tid\" + index,\n              children: GetItemById(row.id, state.Topping).name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: checkValid,\n        style: {\n          color: \"#e0f2f1\",\n          backgroundColor: \"teal\",\n          height: \"55px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 135\n        }, this), \"\\u30AB\\u30FC\\u30C8\\u306B\\u8FFD\\u52A0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ItemDetail, \"uolvcu+hmmrqYnzYVdBbnJlIyPI=\", false, function () {\n  return [useSelector, useDispatch, useParams, useHistory];\n});\n\n_c = ItemDetail;\nexport default ItemDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetail\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/gitsample/team-front/coffee-app/src/views/ItemDetail.tsx"],"names":["React","firebase","Button","Card","LocalCafeIcon","useState","DefaultRootState","useDispatch","useSelector","GetItemById","useParams","useHistory","ShoppingCartIcon","ItemDetail","state","dispatch","Item_id","history","handleLink","path","push","choiceTopping","setChoiceTopping","sizeChoice","setSizeChoice","quantityChoise","setQuantityChoise","sizeFinal","setSizeFinal","puantityFinal","setQuantityFinal","setTopping","e","getId","Number","target","value","includes","filter","item","totalPrice","length","Topping","priceM","Coffee","priceL","setQuantity","allSelects","sizePrice","checkValid","errorSentence","alert","number","Itemid","id","toppingid","price","cartItemList","cart","cartItem","user","uid","firestore","collection","doc","update","then","querySnapshot","type","payload","mainview","display","itemdetail","width","name","detail","process","env","PUBLIC_URL","image","borderRadius","backgroundColor","textAlign","fontSize","map","row","index","listStyle","color","height"],"mappings":"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","sourcesContent":["// ts\nimport * as React from 'react';\nimport type { VFC } from \"react\"\nimport 'react-redux'\nimport { StoreState } from '../type/type'\n\n// import React, { Component } from 'react';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\n\n// material ui\nimport Button from '@material-ui/core/Button' \nimport Card from '@material-ui/core/Card';\nimport LocalCafeIcon from '@material-ui/icons/LocalCafe';\nimport { useState } from 'react';\nimport { DefaultRootState, useDispatch, useSelector } from \"react-redux\"\nimport { GetItemById } from '../components/Items'\nimport { useParams } from 'react-router-dom'\nimport { useHistory } from 'react-router-dom'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\n\ndeclare module 'react-redux' {\n    interface DefaultRootState extends StoreState {}\n}\n\nconst ItemDetail: VFC = () =>{\n  \n    const state = useSelector((state: DefaultRootState ) => state)\n    const dispatch = useDispatch()\n    const {Item_id} = useParams<any>()\n    const history = useHistory()\n    const handleLink = (path: string) => history.push(path)\n\n    let [choiceTopping, setChoiceTopping] = useState<Array<number>>([])\n    let [sizeChoice, setSizeChoice] = useState<string>(\"\")\n    let [quantityChoise, setQuantityChoise] = useState<string>(\"\")\n    let [sizeFinal, setSizeFinal] = useState<string>(\"\")\n    let [puantityFinal, setQuantityFinal] = useState<string>(\"\")\n\n\n    const setTopping = (e) => {\n        const getId = Number(e.target.value)\n    \n        if(choiceTopping.includes(getId)){\n            setChoiceTopping(choiceTopping.filter(item => item !== getId));\n        } else {\n            setChoiceTopping([...choiceTopping, getId]);\n        }\n    }\n    \n    let totalPrice = ()  => {\n        if(sizeChoice === \"M\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceM * Number(quantityChoise) + GetItemById(Item_id*1,state.Coffee).priceM * Number(quantityChoise)\n        }else if(sizeChoice === \"L\"){\n            return  choiceTopping.length * GetItemById(Item_id*1,state.Topping).priceL * Number(quantityChoise) + GetItemById(Item_id*1,state.Coffee).priceL * Number(quantityChoise) \n        }\n    }\n    \n    let setQuantity = (e) => setQuantityChoise(e.target.value) \n    let allSelects ={}\n    let sizePrice = \"\"\n    \n    const checkValid = ()  => {\n        setSizeFinal(\"\")\n        setQuantityFinal(\"\")\n        let errorSentence = \"\"\n\n        if (sizeChoice===\"\") {       \n           setSizeFinal(\"サイズを選択してください\")\n           errorSentence += \"サイズ \"\n        } \n        if (quantityChoise===\"\" || quantityChoise===\"-------------------------------\") {       \n           setQuantityFinal(\"個数を選択してください\")\n           errorSentence += \"個数 \"\n        }\n        if(errorSentence !== \"\"){\n            alert(errorSentence + \"を入力してください\")\n        }else{\n            if(sizeChoice === \"M\"){\n                sizePrice= \"priceM\"\n            }else if(sizeChoice === \"L\"){\n                sizePrice= \"priceL\"\n            }\n            \n            allSelects = {number:quantityChoise, Itemid:GetItemById(Item_id*1,state.Coffee).id, toppingid:choiceTopping, price:sizePrice}            \n            // カート作成         \n            let cartItemList = state.cart.cartItemList            \n            cartItemList.push(allSelects)            \n            let cartItem = state.cart\n            cartItem.cartItemList = cartItemList\n            \n            // ログインしていた場合はFirebase、storeを更新\n            if(state.user && state.user.uid){\n                firebase.firestore()\n                  .collection(`users/${state.user.uid}/carts`)\n                  .doc(state.cart.uid)\n                  .update(cartItem)\n                  .then( querySnapshot => {                                              \n                    dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})            \n                  })\n            \n            // ログインしていない場合はstore飲み更新\n            }else{\n                dispatch({ type: 'UPDATE_CARTITEMLIST', payload: { cartItemList }})\n            }  \n            handleLink('/cart')              \n        }                \n    }\n    \n    const mainview = {\n        display:\"flex\"\n    }\n\n    const itemdetail = {\n        display: \"block\",\n        width: \"100%\",\n        // textAlign: \"center\"\n    }\n\n    return (\n        <Card style={mainview}>\n            <div style={itemdetail}>\n            <h1>{GetItemById(Item_id*1,state.Coffee).name} </h1>   \n            <p>{GetItemById(Item_id*1,state.Coffee).detail}</p>\n         \n            <img src={`${process.env.PUBLIC_URL}/${GetItemById(Item_id*1,state.Coffee).image}`}  height=\"400px\" alt=\"商品\" style={{borderRadius:10}}/>\n            <h3 style={{backgroundColor:\"rgb(70, 77, 180)\"}}>合計金額：{totalPrice()}円(税抜)</h3>                      \n            <p id='error'> {sizeFinal}</p>\n            <p>\n               <span>サイズの選択：　</span>\n               <input type=\"radio\" name=\"size\" id='M' onClick={() => setSizeChoice(\"M\")} value=\"M\" /><label htmlFor='M' className='point'>\n               <span><LocalCafeIcon fontSize='small'/>&nbsp;M&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceM}円(税抜)</span></label>\n               &nbsp;&nbsp;/&nbsp;&nbsp;\n               <input type=\"radio\" name=\"size\" id='L' onClick={() => setSizeChoice(\"L\")} value=\"L\" /><label htmlFor='L' className='point'>\n               <span><LocalCafeIcon />&nbsp;L&nbsp;&nbsp;{GetItemById(Item_id*1,state.Coffee).priceL}円(税抜)</span></label>\n            </p>\n\n            <div>\n            <div id='error'> {puantityFinal}</div>  \n            <span>個数の選択：　　　　</span>\n    \n                <select onChange={setQuantity}>\n                    <option >-------------------------------</option>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                    <option value=\"6\">6</option>\n                    <option value=\"7\">7</option>\n                    <option value=\"8\">8</option>\n                    <option value=\"9\">9</option>\n                    <option value=\"10\">10</option>\n                </select>\n            </div>\n            <div>\n                <span>トッピングの選択：</span>\n                <span style={{textAlign:'right', fontSize:'5px'}}>１つにつきMサイズ：200円・Lサイズ：300円</span>\n                    {state.Topping && state.Topping.map((row,index) => (\n                        <ul style={{listStyle:'none', }} key={index}>\n                        <li className='toppingNarabi'>                                                       \n                            <input id={\"tid\" + index} type=\"checkbox\" value={row.id} onChange={setTopping} checked={choiceTopping.includes(row.id)}/>\n                            <label htmlFor={\"tid\" + index}>{GetItemById(row.id,state.Topping).name}</label>                            \n                        </li>\n                        </ul>\n                        ))\n                    }\n            </div>\n\n\n            <p></p>\n\n                <p></p>                                          \n                <Button variant=\"contained\" onClick={checkValid} style={{ color: \"#e0f2f1\", backgroundColor: \"teal\", height:\"55px\" }}><ShoppingCartIcon />カートに追加</Button>             \n            </div>\n        </Card>\n    )\n}\nexport default ItemDetail"]},"metadata":{},"sourceType":"module"}