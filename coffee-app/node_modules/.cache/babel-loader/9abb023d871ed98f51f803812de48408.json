{"ast":null,"code":"var _jsxFileName = \"/Users/kiritoshimura/Desktop/coffee-app/src/views/OrderConfirm.js\",\n    _s = $RefreshSig$();\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\nimport Button from '@material-ui/core/Button'; // components\n\nimport { newCart } from '../store/index';\nimport { GetItemById } from '../components/Items'; // material ui\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell'; // import TableContainer from '@material-ui/core/TableContainer';\n\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow'; // import Paper from '@material-ui/core/Paper';\n// import Typography from '@material-ui/core/Typography';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OrderConfirm() {\n  _s();\n\n  //まとめる　＋カートの情報も　state.cart.cartItemListでとってこれる\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [addNumber, setAddNumber] = useState('');\n  const [address, setAddress] = useState('');\n  const [orderDate, setOrderDate] = useState('');\n  const [orderTime, setOrderTime] = useState('');\n  const [tel, setTel] = useState('');\n  const [status, setStatus] = useState('');\n  const [errors, setErrors] = useState([]); //エラーの配列\n  // const [buyer,setBuyer] =useState({})//注文者情報\n\n  const [cartItemList, setCartItemList] = useState([]); //firebase ここから\n\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const history = useHistory();\n\n  const handleLink = path => history.push(path);\n\n  const AddCartFire = by => {\n    const newOrder = Object.assign(by, {\n      cartItemList: state.cart.cartItemList\n    }); // add history\n\n    firebase.firestore().collection(`users/${state.user.uid}/carts`).doc(state.cart.uid).update(newOrder).then(d => {\n      dispatch({\n        type: 'ADD_ORDERHISTORY',\n        payload: {\n          uid: state.cart.uid,\n          orderhistory: newOrder\n        }\n      });\n    }); // create cate\n\n    firebase.firestore().collection(`users/${state.user.uid}/carts`).add(newCart).then(d => {\n      const newCarts = Object.assign({}, newCart);\n      newCarts.uid = d.id;\n      dispatch({\n        type: 'CREATE_CART',\n        payload: {\n          cart: newCarts\n        }\n      });\n    });\n    handleLink('orderfinish');\n  };\n\n  const changeName = e => {\n    setName(e.target.value);\n  };\n\n  const changeEmail = e => {\n    setEmail(e.target.value);\n  };\n\n  const changeAddNumber = e => {\n    setAddNumber(e.target.value);\n  };\n\n  const changeAddress = e => {\n    setAddress(e.target.value);\n  };\n\n  const changeTel = e => {\n    setTel(e.target.value);\n  };\n\n  const changeOrderDate = e => {\n    setOrderDate(e.target.value);\n  };\n\n  const changeOrderTime = e => {\n    setOrderTime(e.target.value);\n  };\n\n  const changeStatus = e => {\n    setStatus(e.target.value);\n  };\n\n  const validEmail = email => {\n    let re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  }; //メールアドレスのバリデーション\n\n\n  const validZipaddress = addNumber => {\n    let re = /^\\d{3}-\\d{4}$/;\n    return re.test(addNumber); //郵便番号の表記のバリデーション\n  };\n\n  const validPhone = tel => {\n    let re = /^\\d{2,5}-\\d{1,4}-\\d{4}$/;\n    return re.test(tel); //電話番号の表記のバリデーション\n  }; //日付のバリデーション　-始まり-\n\n\n  const validOrderdate = orderDate => {\n    //本日\n    let today = new Date();\n    today = new Date(today.getFullYear(), today.getMonth(), today.getDate(), today.getHours());\n    let date1 = new Date(orderDate);\n    let nowDay = today.getDate();\n    let date = new Date(date1);\n    date1 = new Date(date1.getMonth(), date1.getDate());\n    let selectedDay = date.getDate();\n    let nowHour = today.getHours();\n    let a = Math.abs(orderTime - nowHour);\n\n    if (nowDay === selectedDay) {\n      console.log('同じ日付です');\n\n      if (orderTime <= nowHour) {\n        console.log('時間がおかしいです');\n        return false;\n      } else if (3 <= a) {\n        console.log('時間は正常です');\n        return true;\n      } else {\n        return false;\n      }\n    } //ここまで同じ日の場合の処理\n    else if (nowDay >= selectedDay) {\n      console.log('本日以降の日付を選択してください');\n      return false;\n    } else {\n      return true;\n    }\n  }; // 日付のバリデーション　-終わり-\n\n\n  const checkValid = () => {\n    //配列をからにする\n    setErrors('');\n    let allError = [];\n\n    if (!name) {\n      allError.push(\"名前を入力してください\");\n    }\n\n    if (!email) {\n      allError.push(\"メールアドレスを入力してください\");\n    } else if (!validEmail(email)) {\n      allError.push(\"メールアドレスを正しい形式で入力してください\");\n    }\n\n    if (!addNumber) {\n      allError.push(\"郵便番号を入力してください\");\n    } else if (!validZipaddress(addNumber)) {\n      allError.push(\"郵便番号を正しい形式で入力してください\");\n    }\n\n    if (!address) {\n      allError.push(\"住所を入力してください\");\n    }\n\n    if (!orderDate) {\n      allError.push(\"配達日を入力してください\");\n    } else if (!validOrderdate(orderDate)) {\n      allError.push(\"今から3時間後の日時をご入力ください\");\n    }\n\n    if (!orderTime) {\n      allError.push(\"配達時間を入力してください\");\n    }\n\n    if (!tel) {\n      allError.push(\"電話番号を入力してください\");\n    } else if (!validPhone(tel)) {\n      allError.push(\"電話番号を正しい形式で入力してください\");\n    }\n\n    if (!status) {\n      allError.push(\"支払い方法を入力してください\");\n    }\n\n    setErrors(allError);\n\n    if (allError.length === 0) {\n      let objName = {\n        name: name\n      };\n      let objEmail = {\n        email: email\n      };\n      let objAddnumber = {\n        addNumber: addNumber\n      };\n      let objAddress = {\n        address: address\n      };\n      let objOrderDate = {\n        orderDate: orderDate\n      };\n      let objOrderTime = {\n        orderTime: orderTime\n      };\n      let objTel = {\n        tel: tel\n      };\n      let objStatus = {\n        status: status\n      };\n      let BuyerObj = Object.assign({}, objName, objEmail, objAddnumber, objAddress, objOrderDate, objOrderTime, objTel, objStatus); // setBuyer(BuyerObj);      \n\n      AddCartFire(BuyerObj);\n    }\n  };\n\n  useEffect(() => {\n    let newCartItemList = state.cart.cartItemList;\n\n    if (newCartItemList) {\n      // cartのIDを全て商品情報に変換 Item, Topping, subtotal を追加\n      newCartItemList = newCartItemList.map(c => {\n        c.Item = GetItemById(c.Itemid, state.Coffee);\n        c.Topping = c.toppingid.map(t => GetItemById(t, state.Topping));\n        c.subtotal = (c.Item[c.price] + c.Topping.reduce((ac, cu) => ac + cu[c.price], 0)) * c.number;\n        return c;\n      });\n      setCartItemList(newCartItemList);\n    } else {\n      handleLink('/cart');\n    }\n  }, [state.cart]);\n  useEffect(() => {\n    if (!state.user.uid) {\n      handleLink('/cart');\n    }\n  }, [state.user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      \"aria-label\": \"simple table\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"\\u5546\\u54C1\\u540D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"\\u30B5\\u30A4\\u30BA\\u3001\\u4FA1\\u683C\\u3001\\u6570\\u91CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"\\u30C8\\u30C3\\u30D4\\u30F3\\u30B0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"\\u5408\\u8A08\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: cartItemList.map((c, index) => {\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              component: \"th\",\n              scope: \"row\",\n              children: [c.Item.name, /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `${process.env.PUBLIC_URL}/${c.Item.image}`,\n                height: \"100px\",\n                alt: \"\\u5546\\u54C1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [c.price.replace('price', '') + 'サイズ', \"\\u3001\", c.Item[c.price], \"\\u5186\\u3001\", c.number, \"\\u500B\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: c.Topping.map((t, i) => {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [t.name, \"\\u3001\", t[c.price], \"\\u5186\"]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 21\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [c.subtotal, \"\\u5186\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: errors.map(error => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: error\n      }, error.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u304A\\u540D\\u524D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: name,\n              onChange: changeName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: email,\n              onChange: changeEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u90F5\\u4FBF\\u756A\\u53F7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: addNumber,\n              onChange: changeAddNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u4F4F\\u6240\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: address,\n              onChange: changeAddress\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u96FB\\u8A71\\u756A\\u53F7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: tel,\n              onChange: changeTel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u914D\\u9054\\u65E5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: orderDate,\n              onChange: changeOrderDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u914D\\u9054\\u6642\\u9593\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"pets\",\n              id: \"pet-select\",\n              value: orderTime,\n              onChange: changeOrderTime,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u6642\\u9593\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"10\",\n                children: \"10\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"11\",\n                children: \"11\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"12\",\n                children: \"12\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"13\",\n                children: \"13\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"14\",\n                children: \"14\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"15\",\n                children: \"15\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"16\",\n                children: \"16\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"17\",\n                children: \"17\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"18\",\n                children: \"18\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"19\",\n                children: \"19\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"20\",\n                children: \"20\\u6642\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u652F\\u6255\\u3044\\u65B9\\u6CD5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      border: \"1\",\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u4EE3\\u91D1\\u5F15\\u63DB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"payment\",\n              value: \"1\",\n              onClick: changeStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u30AF\\u30EC\\u30B8\\u30C3\\u30C8\\u30AB\\u30FC\\u30C9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"payment\",\n              value: \"2\",\n              onClick: changeStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: checkValid,\n      children: \"\\u6CE8\\u6587\\u3059\\u308B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderConfirm, \"9xHlElb1YEYdk3aFGtrGC3ZV32Q=\", false, function () {\n  return [useDispatch, useSelector, useHistory];\n});\n\n_c = OrderConfirm;\nexport default OrderConfirm;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderConfirm\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/views/OrderConfirm.js"],"names":["useDispatch","useSelector","useState","useEffect","useHistory","firebase","Button","newCart","GetItemById","Table","TableBody","TableCell","TableHead","TableRow","OrderConfirm","name","setName","email","setEmail","addNumber","setAddNumber","address","setAddress","orderDate","setOrderDate","orderTime","setOrderTime","tel","setTel","status","setStatus","errors","setErrors","cartItemList","setCartItemList","dispatch","state","history","handleLink","path","push","AddCartFire","by","newOrder","Object","assign","cart","firestore","collection","user","uid","doc","update","then","d","type","payload","orderhistory","add","newCarts","id","changeName","e","target","value","changeEmail","changeAddNumber","changeAddress","changeTel","changeOrderDate","changeOrderTime","changeStatus","validEmail","re","test","validZipaddress","validPhone","validOrderdate","today","Date","getFullYear","getMonth","getDate","getHours","date1","nowDay","date","selectedDay","nowHour","a","Math","abs","console","log","checkValid","allError","length","objName","objEmail","objAddnumber","objAddress","objOrderDate","objOrderTime","objTel","objStatus","BuyerObj","newCartItemList","map","c","Item","Itemid","Coffee","Topping","toppingid","t","subtotal","price","reduce","ac","cu","number","index","process","env","PUBLIC_URL","image","replace","i","error"],"mappings":"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","sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport firebase from \"firebase/compat/app\";\nimport 'firebase/compat/firestore';\nimport Button from '@material-ui/core/Button';\n// components\nimport { newCart } from '../store/index'\nimport { GetItemById } from '../components/Items'\n// material ui\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\n// import TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n// import Paper from '@material-ui/core/Paper';\n// import Typography from '@material-ui/core/Typography';\n\nfunction OrderConfirm() {\n\n  //まとめる　＋カートの情報も　state.cart.cartItemListでとってこれる\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [addNumber, setAddNumber] = useState('');\n  const [address, setAddress] = useState('');\n\n  const [orderDate, setOrderDate] = useState('');\n  const [orderTime, setOrderTime] = useState('');\n  const [tel, setTel] = useState('');\n  const [status, setStatus] = useState('');\n  const [errors, setErrors] = useState([]); //エラーの配列\n\n  // const [buyer,setBuyer] =useState({})//注文者情報\n  const [cartItemList, setCartItemList] = useState([])\n\n  //firebase ここから\n  const dispatch = useDispatch();\n  const state = useSelector(state => state); \n  const history = useHistory()\n  const handleLink = path => history.push(path)\n\n  const AddCartFire = (by) => {        \n\n    const newOrder = Object.assign(by,{ cartItemList: state.cart.cartItemList } )              \n\n    // add history\n    firebase.firestore()\n            .collection(`users/${state.user.uid}/carts`)                     \n            .doc(state.cart.uid)\n            .update(newOrder)\n            .then( d => {                                                    \n              dispatch({ type:'ADD_ORDERHISTORY', payload:{ uid: state.cart.uid, orderhistory: newOrder }})                 \n            })\n\n    // create cate\n    firebase.firestore()\n              .collection(`users/${state.user.uid}/carts`)                     \n              .add(newCart)          \n              .then( d => {\n                const newCarts = Object.assign({}, newCart)\n                newCarts.uid = d.id                                                    \n                dispatch({ type:'CREATE_CART', payload:{ cart: newCarts }})                 \n              }) \n    handleLink('orderfinish')\n  }    \n\n  const changeName = (e) => {\n    setName(e.target.value);\n  };\n\n  const changeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const changeAddNumber = (e) => {\n    setAddNumber(e.target.value);\n  };\n\n  const changeAddress = (e) => {\n    setAddress(e.target.value);\n  };\n\n  const changeTel = (e) => {\n    setTel(e.target.value);\n  };\n\n  const changeOrderDate = (e) => {\n    setOrderDate(e.target.value);\n  };\n\n  const changeOrderTime= (e) => {\n    setOrderTime(e.target.value);\n  };\n\n  const changeStatus= (e) => {\n    setStatus(e.target.value);\n  };\n\n  const  validEmail=(email)=>{\n    let re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  }//メールアドレスのバリデーション\n\n  const validZipaddress=(addNumber)=>{\n    let re = /^\\d{3}-\\d{4}$/\n    return re.test(addNumber) //郵便番号の表記のバリデーション\n  }\n\n  const  validPhone = (tel) =>{\n    let re = /^\\d{2,5}-\\d{1,4}-\\d{4}$/\n    return re.test(tel) //電話番号の表記のバリデーション\n  }\n\n//日付のバリデーション　-始まり-\n\nconst validOrderdate=(orderDate)=>{\n  //本日\n  let today = new Date() \n  today = new Date(\n    today.getFullYear(),\n    today.getMonth(),\n    today.getDate(),\n    today.getHours()\n  )\n  \n  let date1 = new Date(orderDate)\n  let nowDay = today.getDate()\n  let date = new Date (date1)\n   date1 = new Date(\n    date1.getMonth(),\n    date1.getDate()\n  )\n  let selectedDay = date.getDate()\n  let nowHour = today.getHours()\n  let a = Math.abs(orderTime - nowHour)\n  if(nowDay === selectedDay){\n    console.log('同じ日付です')\n    if(orderTime <= nowHour){\n       console.log('時間がおかしいです')\n      return false\n    } else if( 3 <= a) {\n    console.log('時間は正常です')\n    return true\n    } else {\n    return false\n    }\n  }\n  //ここまで同じ日の場合の処理\n     else if(nowDay >= selectedDay){\n    console.log('本日以降の日付を選択してください')\n    return false\n  }else{\n    return true\n  }\n}\n// 日付のバリデーション　-終わり-\n\n\n  const checkValid = () => {  \n    \n    //配列をからにする\n    setErrors('')\n    let allError =[]    \n\n    if (!name) {\n      allError.push(\"名前を入力してください\")\n    } \n    if (!email) {\n      allError.push(\"メールアドレスを入力してください\")\n    } else if(!validEmail(email)){\n      allError.push(\"メールアドレスを正しい形式で入力してください\")\n    }\n\n    if (!addNumber) {\n      allError.push(\"郵便番号を入力してください\")\n    } else if(!validZipaddress(addNumber)){\n      allError.push(\"郵便番号を正しい形式で入力してください\")\n    }\n\n\n    if (!address) {\n      allError.push(\"住所を入力してください\")\n    } \n    \n    if (!orderDate) {\n      allError.push(\"配達日を入力してください\")\n    } else if(!validOrderdate(orderDate)){\n      allError.push(\"今から3時間後の日時をご入力ください\")\n    }\n\n    if (!orderTime) {\n      allError.push(\"配達時間を入力してください\")\n    } \n    if (!tel) {\n      allError.push(\"電話番号を入力してください\")\n    } else if(!validPhone(tel)){\n      allError.push(\"電話番号を正しい形式で入力してください\")\n    }\n\n\n    if (!status) {\n      allError.push(\"支払い方法を入力してください\")\n    } \n    setErrors(allError)\n        \n    if (allError.length === 0) {      \n        let objName = {name:name}\n        let objEmail = {email:email}\n        let objAddnumber = {addNumber:addNumber}\n        let objAddress = {address:address}\n        let objOrderDate = {orderDate:orderDate}\n        let objOrderTime = {orderTime:orderTime}\n        let objTel = {tel:tel}\n        let objStatus = {status:status}\n\n        let BuyerObj =Object.assign({},objName, objEmail, objAddnumber,objAddress,objOrderDate,objOrderTime,objTel,objStatus);\n        // setBuyer(BuyerObj);      \n\n        AddCartFire(BuyerObj)\n    }\n  }; \n\n  useEffect(()=>{\n    let newCartItemList = state.cart.cartItemList\n    if(newCartItemList){\n      // cartのIDを全て商品情報に変換 Item, Topping, subtotal を追加\n      newCartItemList = newCartItemList.map( c => { \n        c.Item = GetItemById(c.Itemid, state.Coffee)\n        c.Topping = c.toppingid.map( t => GetItemById(t, state.Topping) )\n        c.subtotal = ( c.Item[c.price] + c.Topping.reduce((ac,cu) => ac + cu[c.price],0)) * c.number\n        return c\n      })\n      setCartItemList(newCartItemList)\n    }\n    else{\n      handleLink('/cart')\n    }\n  },[state.cart])\n\n  useEffect(()=>{\n    if(!state.user.uid){\n      handleLink('/cart')\n    }\n  },[state.user])\n\n  return (\n    \n    <div>\n      <Table aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>商品名</TableCell>\n            <TableCell>サイズ、価格、数量</TableCell>\n            <TableCell>トッピング</TableCell>\n            <TableCell>合計</TableCell>            \n          </TableRow>\n        </TableHead>\n        <TableBody>          \n         {cartItemList.map((c, index) => {            \n            return (\n            <TableRow key={index}>\n              <TableCell component=\"th\" scope=\"row\">\n                {c.Item.name}\n                <img src={`${process.env.PUBLIC_URL}/${c.Item.image}`} height=\"100px\" alt=\"商品\"/>\n              </TableCell>\n              <TableCell>{c.price.replace('price','') + 'サイズ'}、{c.Item[c.price]}円、{c.number}個</TableCell>              \n              <TableCell>\n                <ul>                     \n                {c.Topping.map((t,i) => {                  \n                  return (\n                    <li key={i}>{t.name}、{t[c.price]}円</li>\n                  )\n                })}\n                </ul> \n              </TableCell>\n              <TableCell>{c.subtotal}円</TableCell>              \n            </TableRow>)\n            })                  \n          }\n        </TableBody>\n      </Table>\n \n    {/* エラーメッセージ表示 */}\n    <ul>\n        {errors.map((error) => (\n          <li key={error.id}>\n            {error}\n          </li>\n        ))}\n      </ul>    \n\n  <table>\n  \t<tbody>\n\t\t<tr>\n\t\t\t<td>\n        <div>\n          お名前 \n        </div>\n      </td>\n\t\t\t<td>\n         <input type=\"text\" value={name} onChange={changeName}></input>     \n      </td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n        <div>\n        メールアドレス\n        </div>\n      </td>\n\t\t\t<td>\n         <input type=\"text\" value={email} onChange={changeEmail}></input>     \n      </td>\n\t\t</tr>\n    <tr>\n\t\t\t<td>\n        <div>\n          郵便番号\n        </div>\n      </td>\n\t\t\t<td>\n         <input type=\"text\" value={addNumber} onChange={changeAddNumber}></input>     \n      </td>\n\t\t</tr>\n    <tr>\n\t\t\t<td>\n        <div>\n          住所\n        </div>\n      </td>\n\t\t\t<td>\n         <input type=\"text\" value={address} onChange={changeAddress}></input>     \n      </td>\n\t\t</tr>\n    <tr>\n\t\t\t<td>\n        <div>\n          電話番号\n        </div>\n      </td>\n\t\t\t<td>\n         <input type=\"text\" value={tel} onChange={changeTel}></input>     \n      </td>\n\t\t</tr>\n\n    <tr>\n\t\t\t<td>\n        <div>\n          配達日\n        </div>\n      </td>\n\t\t\t<td>\n      <input type=\"date\" value={orderDate} onChange={changeOrderDate}></input>\n      </td>\n\t\t</tr>\n\n    <tr>\n\t\t\t<td>\n        <div>\n          配達時間\n        </div>\n      </td>\n\t\t\t<td>\n      <select name=\"pets\" id=\"pet-select\" value={orderTime} onChange={changeOrderTime}> \n        <option value=\"\">時間を選択してください</option>\n        <option value=\"10\">10時</option>\n        <option value=\"11\">11時</option>\n        <option value=\"12\">12時</option>\n        <option value=\"13\">13時</option>\n        <option value=\"14\">14時</option>\n        <option value=\"15\">15時</option>\n        <option value=\"16\">16時</option>\n        <option value=\"17\">17時</option>\n        <option value=\"18\">18時</option>\n        <option value=\"19\">19時</option>\n        <option value=\"20\">20時</option>\n    </select>      \n    </td>\n\t\t</tr>\n    </tbody>\n</table>\n\n<h1>支払い方法</h1>\n  <table border=\"1\">\n    <tbody>\n    <tr>\n\t\t\t<td>\n        <div>\n          <label>代金引換</label>\n        </div>\n      </td>\n\t\t\t<td>\n        <input type=\"radio\"  name=\"payment\" value=\"1\" onClick={changeStatus}></input>\n      </td>\n\t\t</tr>\n    <tr>\n\t\t\t<td>\n        <div>\n          <label >クレジットカード</label>\n        </div>\n      </td>\n\t\t\t<td>\n        <input type=\"radio\"  name=\"payment\" value=\"2\" onClick={changeStatus}></input>\n      </td>\n\t\t</tr>\n\t  </tbody>\n  </table>\n\n  <Button variant=\"contained\" color=\"primary\"  onClick={checkValid}>注文する</Button>\n\n</div>)\n}\n\n\nexport default OrderConfirm"]},"metadata":{},"sourceType":"module"}