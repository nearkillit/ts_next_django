{"ast":null,"code":"import labelmake from \"labelmake\";\nimport font_GenShinGothic from \"../module/font_GenShinGothic\";\nconst font = {\n  font_GenShinGothic\n}; // 領収書PDF\n\nexport const MakeReceipt = async user => {\n  const template = {\n    fontName: \"font_GenShinGothic\",\n    basePdf: {\n      width: 210,\n      height: 297\n    },\n    \"schemas\": [{\n      \"field1\": {\n        \"type\": \"text\",\n        \"position\": {\n          \"x\": 20,\n          \"y\": 20\n        },\n        \"width\": 150,\n        \"height\": 15,\n        \"alignment\": \"center\",\n        \"fontSize\": 30,\n        \"characterSpacing\": 0,\n        \"lineHeight\": 1\n      },\n      \"field2\": {\n        \"type\": \"text\",\n        \"position\": {\n          \"x\": 20,\n          \"y\": 35\n        },\n        \"width\": 150,\n        \"height\": 10,\n        \"alignment\": \"center\",\n        \"fontSize\": 20,\n        \"characterSpacing\": 0,\n        \"lineHeight\": 1\n      },\n      \"field3\": {\n        \"type\": \"text\",\n        \"position\": {\n          \"x\": 20,\n          \"y\": 45\n        },\n        \"width\": 150,\n        \"height\": 200,\n        \"alignment\": \"left\",\n        \"fontSize\": 12,\n        \"characterSpacing\": 0,\n        \"lineHeight\": 1\n      }\n    }]\n  };\n  const itemsContents = user.cartItemList.reduce((a, c) => a + \"商品名：\" + c.Item.name + '\\r\\n', '');\n  const total = user.cartItemList.reduce((a, c) => a + c.subtotal - (c.Item.discount ? c.Item.discount * c.number : 0), 0);\n  const textContents = \"■メニュー　\\r\\n\" + itemsContents + \"■合計金額(税込)\" + total + \"円\\r\\n\" + \"＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝\\r\\n\" + \"株式会社らくらくcoffeeジャパン \\r\\n\";\n  const inputs = [{\n    \"field1\": \"領収書\",\n    \"field2\": \"決済内容\",\n    \"field3\": textContents\n  }];\n  const pdf = await labelmake({\n    template,\n    inputs,\n    font\n  }); // Browser\n\n  const blob = new Blob([pdf.buffer], {\n    type: \"application/pdf\"\n  }); // console.log(blob);    \n  // console.log(URL.createObjectURL(blob))    \n\n  return URL.createObjectURL(blob);\n};\n_c = MakeReceipt;\n\nvar _c;\n\n$RefreshReg$(_c, \"MakeReceipt\");","map":{"version":3,"sources":["/Users/kiritoshimura/Desktop/coffee-app/src/components/MakeRecipt.js"],"names":["labelmake","font_GenShinGothic","font","MakeReceipt","user","template","fontName","basePdf","width","height","itemsContents","cartItemList","reduce","a","c","Item","name","total","subtotal","discount","number","textContents","inputs","pdf","blob","Blob","buffer","type","URL","createObjectURL"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,WAAtB;AACA,OAAOC,kBAAP,MAA+B,8BAA/B;AAEA,MAAMC,IAAI,GAAG;AAAED,EAAAA;AAAF,CAAb,C,CAEC;;AACD,OAAO,MAAME,WAAW,GAAI,MAAOC,IAAP,IAAgB;AACxC,QAAMC,QAAQ,GAAG;AACfC,IAAAA,QAAQ,EAAE,oBADK;AAEfC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,KAAK,EAAE,GAAT;AAAcC,MAAAA,MAAM,EAAE;AAAtB,KAFM;AAGf,eAAW,CACX;AACE,gBAAU;AACR,gBAAQ,MADA;AAER,oBAAY;AACV,eAAK,EADK;AAEV,eAAK;AAFK,SAFJ;AAMR,iBAAS,GAND;AAOR,kBAAU,EAPF;AAQR,qBAAa,QARL;AASR,oBAAY,EATJ;AAUR,4BAAoB,CAVZ;AAWR,sBAAc;AAXN,OADZ;AAcE,gBAAU;AACR,gBAAQ,MADA;AAER,oBAAY;AACV,eAAK,EADK;AAEV,eAAK;AAFK,SAFJ;AAMR,iBAAS,GAND;AAOR,kBAAU,EAPF;AAQR,qBAAa,QARL;AASR,oBAAY,EATJ;AAUR,4BAAoB,CAVZ;AAWR,sBAAc;AAXN,OAdZ;AA2BE,gBAAU;AACR,gBAAQ,MADA;AAER,oBAAY;AACV,eAAK,EADK;AAEV,eAAK;AAFK,SAFJ;AAMR,iBAAS,GAND;AAOR,kBAAU,GAPF;AAQR,qBAAa,MARL;AASR,oBAAY,EATJ;AAUR,4BAAoB,CAVZ;AAWR,sBAAc;AAXN;AA3BZ,KADW;AAHI,GAAjB;AA+CA,QAAMC,aAAa,GAAGN,IAAI,CAACO,YAAL,CAAkBC,MAAlB,CAA0B,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,GAAG,MAAJ,GAAcC,CAAC,CAACC,IAAF,CAAOC,IAArB,GAA4B,MAA/D,EAAsE,EAAtE,CAAtB;AACA,QAAMC,KAAK,GAAGb,IAAI,CAACO,YAAL,CAAkBC,MAAlB,CAA0B,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,GAAGC,CAAC,CAACI,QAAN,IAAkBJ,CAAC,CAACC,IAAF,CAAOI,QAAP,GAAkBL,CAAC,CAACC,IAAF,CAAOI,QAAP,GAAkBL,CAAC,CAACM,MAAtC,GAA+C,CAAjE,CAAnC,EAAwG,CAAxG,CAAd;AACA,QAAMC,YAAY,GACd,eAAeX,aAAf,GACA,WADA,GACcO,KADd,GACwB,OADxB,GAEA,yBAFA,GAGA,yBAJJ;AAMA,QAAMK,MAAM,GAAG,CAAC;AAAC,cAAS,KAAV;AAAgB,cAAS,MAAzB;AAAgC,cAASD;AAAzC,GAAD,CAAf;AACA,QAAME,GAAG,GAAG,MAAMvB,SAAS,CAAC;AAAEK,IAAAA,QAAF;AAAYiB,IAAAA,MAAZ;AAAoBpB,IAAAA;AAApB,GAAD,CAA3B,CAzDwC,CA2DxC;;AACA,QAAMsB,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,MAAL,CAAT,EAAuB;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAb,CA5DwC,CA6DxC;AACA;;AACA,SAAOC,GAAG,CAACC,eAAJ,CAAoBL,IAApB,CAAP;AACD,CAhEI;KAAMrB,W","sourcesContent":["import labelmake from \"labelmake\";\nimport font_GenShinGothic from \"../module/font_GenShinGothic\"\n \nconst font = { font_GenShinGothic };\n\n // 領収書PDF\nexport const MakeReceipt =  async (user) => {\n    const template = {\n      fontName: \"font_GenShinGothic\",\n      basePdf: { width: 210, height: 297 },\n      \"schemas\": [\n      {\n        \"field1\": {\n          \"type\": \"text\",\n          \"position\": {\n            \"x\": 20,\n            \"y\": 20\n          },\n          \"width\": 150,\n          \"height\": 15,\n          \"alignment\": \"center\",\n          \"fontSize\": 30,\n          \"characterSpacing\": 0,\n          \"lineHeight\": 1\n        },\n        \"field2\": {\n          \"type\": \"text\",\n          \"position\": {\n            \"x\": 20,\n            \"y\": 35\n          },\n          \"width\": 150,\n          \"height\": 10,\n          \"alignment\": \"center\",\n          \"fontSize\": 20,\n          \"characterSpacing\": 0,\n          \"lineHeight\": 1\n        },\n        \"field3\": {\n          \"type\": \"text\",\n          \"position\": {\n            \"x\": 20,\n            \"y\": 45\n          },\n          \"width\": 150,\n          \"height\": 200,\n          \"alignment\": \"left\",\n          \"fontSize\": 12,\n          \"characterSpacing\": 0,\n          \"lineHeight\": 1\n          }\n        }\n      ]\n    }\n    const itemsContents = user.cartItemList.reduce( (a,c) => a + \"商品名：\" +  c.Item.name + '\\r\\n','' )\n    const total = user.cartItemList.reduce( (a,c) => a + c.subtotal - (c.Item.discount ? c.Item.discount * c.number : 0 ),0 )    \n    const textContents =                 \n        \"■メニュー　\\r\\n\" + itemsContents +        \n        \"■合計金額(税込)\" + total   + \"円\\r\\n\" +\n        \"＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝\\r\\n\" +\n        \"株式会社らくらくcoffeeジャパン \\r\\n\"\n\n    const inputs = [{\"field1\":\"領収書\",\"field2\":\"決済内容\",\"field3\":textContents}];\n    const pdf = await labelmake({ template, inputs, font });    \n    \n    // Browser\n    const blob = new Blob([pdf.buffer], { type: \"application/pdf\" });\n    // console.log(blob);    \n    // console.log(URL.createObjectURL(blob))    \n    return URL.createObjectURL(blob)\n  }\n"]},"metadata":{},"sourceType":"module"}